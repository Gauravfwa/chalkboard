!function(e){var t={};function a(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,a),r.l=!0,r.exports}a.m=e,a.c=t,a.d=function(e,t,i){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(a.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)a.d(i,r,function(t){return e[t]}.bind(null,r));return i},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a(a.s=15)}([function(e,t,a){"use strict";function i(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}a.d(t,"a",(function(){return r}));var r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,a,r;return t=e,r=[{key:"requestHandler",value:function(t){var a=new FormData,i=t.requestData||{};for(var r in i)a.append(r,i[r]);m.request({method:t.method||"POST",url:e.getAFWParams("ajaxurl")||"",params:{action:i.dashboard},body:a,withCredentials:t.withCredentials||!1,responseType:t.responseType||"json"}).then((function(e){t.hasOwnProperty("callback")&&t.callback(e)}))}},{key:"getDate",value:function(e){var t,a=new Date,i="";switch(e){case"today":t=a,i=a;break;case"yesterday":t=new Date(a.getFullYear(),a.getMonth(),a.getDate()-1),i=new Date(a.getFullYear(),a.getMonth(),a.getDate()-1);break;case"this_week":t=new Date(a.getFullYear(),a.getMonth(),a.getDate()-(a.getDay()-1)),i=a;break;case"last_week":t=new Date(a.getFullYear(),a.getMonth(),a.getDate()-(a.getDay()-1)-7),i=new Date(a.getFullYear(),a.getMonth(),a.getDate()-(a.getDay()-1)-1);break;case"last_4_week":t=new Date(a.getFullYear(),a.getMonth(),a.getDate()-29),i=a;break;case"this_month":t=new Date(a.getFullYear(),a.getMonth(),1),i=a;break;case"last_month":t=new Date(a.getFullYear(),a.getMonth()-1,1),i=new Date(a.getFullYear(),a.getMonth(),0);break;case"3_months":t=new Date(a.getFullYear(),a.getMonth()-2,1),i=a;break;case"6_months":t=new Date(a.getFullYear(),a.getMonth()-5,1),i=a;break;case"this_year":t=new Date(a.getFullYear(),0,1),i=a;break;case"last_year":t=new Date(a.getFullYear()-1,0,1),i=new Date(a.getFullYear(),0,0);break;default:t=new Date(a.getFullYear(),a.getMonth(),1),i=a}var r=6e4*(new Date).getTimezoneOffset();return t=new Date(t.getTime()-r),i=new Date(i.getTime()-r),{startDate:t.toISOString().slice(0,10),endDate:i.toISOString().slice(0,10)}}},{key:"getDateTime",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.dayStart,i=void 0!==a&&a,r=t.dayEnd,s=void 0!==r&&r,o=i?"00":s?"23":(new Date).getHours(),n=i?"00":s?"59":(new Date).getMinutes(),l=i?"00":s?"59":(new Date).getSeconds();return e+" "+o+":"+n+":"+l}},{key:"getFullDate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=new Date,a=0!==e?new Date(t.setDate(t.getDate()+e)):t;return a.getFullYear()+"-"+("0"+(a.getMonth()+1)).slice(-2)+"-"+("0"+a.getDate()).slice(-2)}},{key:"formatNumber",value:function(e){return accounting.formatNumber(e,{precision:afwcDashboardParams.precision,thousand:afwcDashboardParams.thousandSeperator,decimal:afwcDashboardParams.decimal})}},{key:"getAFWParams",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=Object.keys(t).length?t:afwcDashboardParams||{};if(e.includes(".")){var i=this.getAFWParams(e.slice(0,e.indexOf(".")),a);return this.getAFWParams(e.slice(e.indexOf(".")+1),i)}return""!==e?e in a?a[e]:"":a}},{key:"doCopy",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(e.length>0){var t=document.createElement("input");t.setAttribute("value",e),document.body.appendChild(t),t.select(),navigator&&navigator.clipboard&&navigator.clipboard.writeText(t.value),document.body.removeChild(t)}}},{key:"getCampaignStatus",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",a=e.getAFWParams("campaignStatuses")||{};return""===t?a:t in a?a[t]:""}},{key:"getCommissionPlansStatus",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",a=e.getAFWParams("commissionPlanStatuses")||{};return""===t?a:t in a?a[t]:""}}],(a=null)&&i(t.prototype,a),r&&i(t,r),e}()},function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var i=a(5),r=a(0);function s(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),e.data={kpi:{},affiliates:[],filters:{},q:""},i.a.showLoader=!1,e.data.currentPage=1,e.data.firstcall=!0,e.data.loadMore=!0,e.data.currentAffiliateID=0,e.data.action="",e.data.start_date=e.data.start_date?e.data.start_date:r.a.getFullDate(-30),e.data.end_date=e.data.end_date?e.data.end_date:r.a.getFullDate(),e.isKPILoading=!0,e.fetch()}var t,a,o;return t=e,o=[{key:"fetch",value:function(){i.a.showLoader=!0,i.a.msg=__("Loading Affiliates","affiliate-for-woocommerce"),e.data.currentPage="load_more"!=e.data.action?1:e.data.currentPage;var t={cmd:"dashboard_data",dashboard:"afwc_dashboard_controller",security:r.a.getAFWParams("security.dashboard.fetchData")||"",from_date:r.a.getDateTime(e.data.start_date,{dayStart:!0}),to_date:r.a.getDateTime(e.data.end_date,{dayEnd:!0}),filters:JSON.stringify(e.data.filters),q:e.data.q,page:e.data.currentPage};r.a.requestHandler({requestData:t,callback:function(t){return e.extractData(t)}}),t.cmd="dashboard_kpi_data",t.security=r.a.getAFWParams("security.dashboard.kpiData")||"",e.isKPILoading=!0,r.a.requestHandler({requestData:t,callback:function(t){return e.extractKPIData(t)}})}},{key:"extractKPIData",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.data.kpi=t.kpi||{},e.isKPILoading=!1}},{key:"extractData",value:function(t){var a;e.data.affiliates.length>0&&"load_more"==e.data.action?(e.data.affiliates=e.data.affiliates.concat(t.affiliateList),e.data.action=""):e.data.affiliates=t.affiliateList||[],i.a.showLoader=!1,e.data.currentAffiliateID>0&&(a=e.data.affiliates.filter((function(t){return t.affiliate_id==e.data.currentAffiliateID}))[0]),void 0===a&&(e.data.currentAffiliateID=e.data.affiliates.length>0?e.data.affiliates[0].affiliate_id:0)}},{key:"exportAffiliates",value:function(t){var a={cmd:"export_affiliates",security:r.a.getAFWParams("security.dashboard.exportAffiliates")||"",from_date:e.data.start_date,to_date:e.data.end_date,filters:JSON.stringify(e.data.filters),q:e.data.q,action:"afwc_dashboard_controller",type:t},i=new URL(afwcDashboardParams.ajaxurl);for(var s in a)i.searchParams.append(s,a[s]);window.open(i.href)}},{key:"data",get:function(){return e._data},set:function(t){e._data=t}}],(a=null)&&s(t.prototype,a),o&&s(t,o),e}();o.data={kpi:{},affiliates:[],filters:{},q:""}},function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var i=a(6),r=a(0),s=a(3);function o(e){return function(e){if(Array.isArray(e))return n(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return n(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return n(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,i=new Array(t);a<t;a++)i[a]=e[a];return i}function l(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var c=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),e.initialize(),this.setCurrentCommission(e.currentCommissionID)}var t,a,n;return t=e,n=[{key:"initialize",value:function(){e.details={commissionId:0,name:"",rules:{},amount:"",type:"",status:"Draft",apply_to:"all",action_for_remaining:"continue",distribution:[]},e.details.no_of_tiers=e.details.distribution.length;var t=afwcDashboardParams.plan_dashboard_data.plan_rule_data,a={};Object.values(t).map((function(e){a=Object.assign(a,e)})),e.allRules=a,e.ruleRow={type:"affiliate",operator:"in",value:""},e.ruleGroup={condition:"AND",rules:[e.ruleRow]},e.idNameMaps={}}},{key:"newCommission",value:function(){e.currentCommissionID=-1,new e}},{key:"saveCommission",value:function(){r.a.requestHandler({requestData:{cmd:"save_commission",commission:JSON.stringify(e.details),security:r.a.getAFWParams("security.commissions.save")||"",dashboard:"afwc_commission_controller"},callback:function(t){if("Success"==t.ACK){var a="";t.last_inserted_id?(e.details.commissionId=t.last_inserted_id,i.a.data.commissions.push(e.details),i.a.data.planOrder.splice(-1,0,t.last_inserted_id),i.a.reOrder(i.a.data.commissions),a=_x("Commission plan created successfully","Notification message for successful commission plan creation","affiliate-for-woocommerce")):(i.a.data.commissions=i.a.data.commissions.map((function(t){return t.commissionId==e.details.commissionId?e.details:t})),a=_x("Commission plan updated successfully","Notification message for successful commission plan update","affiliate-for-woocommerce")),s.a.show({status:"success",message:a}),e.currentCommissionID=0}else s.a.show({status:"error",message:_x("Failed to create or update commission plan","Notification message for failed commission plan creation or update","affiliate-for-woocommerce")})}})}},{key:"deleteCommission",value:function(){r.a.requestHandler({requestData:{cmd:"delete_commission",commission_id:e.currentCommissionID,security:r.a.getAFWParams("security.commissions.delete")||"",dashboard:"afwc_commission_controller"},callback:function(t){if("Success"==t.ACK){var a=e.details.commissionId;i.a.data.commissions=i.a.data.commissions.filter((function(e){return e.commissionId!=a})),i.a.data.planOrder=i.a.data.planOrder.filter((function(e){return e!=a})),e.currentCommissionID=0,s.a.show({status:"success",message:_x("Commission plan deleted successfully","Notification message for successful commission plan deletion","affiliate-for-woocommerce")})}else s.a.show({status:"error",message:_x("Failed to delete commission plan","Notification message for failed commission plan deletion","affiliate-for-woocommerce")})}})}},{key:"details",get:function(){return e._details},set:function(t){e._details=t}}],(a=[{key:"setCurrentCommission",value:function(t){var a={};t>0&&(a=i.a.data.commissions.filter((function(e){return e.commissionId==t}))[0]),e.details={commissionId:a.commissionId||0,name:a.name||"",rules:a.rules||"",amount:a.amount||"",type:a.type||"",status:a.status||"Draft",apply_to:a.apply_to||"all",action_for_remaining:a.action_for_remaining||"continue",no_of_tiers:a.no_of_tiers||"1",distribution:a.distribution||[]},t>0&&this.fetchExtraData(e.details.rules)}},{key:"fetchExtraData",value:function(t){var a=t.rules,i={};a&&(Object.keys(a).map((function(e,t){var r=a[e].rules;Object.keys(r).map((function(e,t){i[r[e].type]||(i[r[e].type]=[]),i[r[e].type]=i[r[e].type].concat(r[e].value),i[r[e].type]=o(new Set(i[r[e].type]))}))})),r.a.requestHandler({requestData:{cmd:"fetch_extra_data",security:r.a.getAFWParams("security.commissions.extraData")||"",dashboard:"afwc_commission_controller",data:JSON.stringify(i)},callback:function(t){"Success"==t.ACK&&(e.idNameMaps=t.result)}}))}}])&&l(t.prototype,a),n&&l(t,n),e}();c.initialize()},function(e,t,a){"use strict";function i(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}a.d(t,"a",(function(){return r}));var r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),e.initialize()}var t,a,r;return t=e,r=[{key:"initialize",value:function(){e.reset()}},{key:"reset",value:function(){e.flags={showNotification:0},e.notification={status:"warning",message:"",autoHide:!0,hideDelay:8e3}}},{key:"show",value:function(t){var a=t.status,i=void 0===a?"warning":a,r=t.message,s=void 0===r?"":r,o=t.autoHide,n=void 0===o||o,l=t.hideDelay,c=void 0===l?8e3:l;e.notification={status:i,message:s,autoHide:n,hideDelay:c},e.flags.showNotification=1}},{key:"hide",value:function(){e.reset()}}],(a=null)&&i(t.prototype,a),r&&i(t,r),e}();r.initialize()},function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var i=a(7),r=a(0),s=a(3);function o(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var n=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),e.initialize(),this.setCurrentCampaign(e.currentCampaignID)}var t,a,n;return t=e,n=[{key:"initialize",value:function(){e.details={title:"",targetLink:afwcDashboardParams.home_url,slug:"",campaignId:0,shortDescription:"",body:"",status:"Draft",metaData:{}}}},{key:"newCampaign",value:function(){e.currentCampaignID=-1,new e}},{key:"saveCampaign",value:function(){r.a.requestHandler({requestData:{cmd:"save_campaign",campaign:JSON.stringify(e.details),security:r.a.getAFWParams("security.campaign.save")||"",dashboard:"afwc_campaign_controller"},callback:function(t){if("Success"==t.ACK){var a="";t.last_inserted_id?(e.details.campaignId=t.last_inserted_id,i.a.data.campaigns.push(e.details),a=_x("Campaign created successfully","Notification message for successful campaign creation","affiliate-for-woocommerce")):(i.a.data.campaigns=i.a.data.campaigns.map((function(t){return t.campaignId==e.details.campaignId?e.details:t})),a=_x("Campaign updated successfully","Notification message for successful campaign update","affiliate-for-woocommerce")),s.a.show({status:"success",message:a}),e.currentCampaignID=0}else s.a.show({status:"error",message:_x("Failed to create or update campaign","Notification message for failed campaign creation or update","affiliate-for-woocommerce")})}})}},{key:"deleteCampaign",value:function(){r.a.requestHandler({requestData:{cmd:"delete_campaign",campaign_id:e.currentCampaignID,security:r.a.getAFWParams("security.campaign.delete")||"",dashboard:"afwc_campaign_controller"},callback:function(t){if("Success"==t.ACK){var a=e.details.campaignId;i.a.data.campaigns=i.a.data.campaigns.filter((function(e){return e.campaignId!=a})),e.currentCampaignID=0,s.a.show({status:"success",message:_x("Campaign deleted successfully","Notification message for successful campaign deletion","affiliate-for-woocommerce")})}else s.a.show({status:"error",message:_x("Failed to delete campaign","Notification message for failed campaign deletion","affiliate-for-woocommerce")})}})}},{key:"details",get:function(){return e._details},set:function(t){e._details=t}}],(a=[{key:"setCurrentCampaign",value:function(t){var a={};t>0&&(a=i.a.data.campaigns.filter((function(e){return e.campaignId==t}))[0]),e.details={title:a.title||"",targetLink:a.targetLink||afwcDashboardParams.home_url,slug:a.slug||"",campaignId:a.campaignId||0,shortDescription:a.shortDescription||"",body:a.body||"",status:a.status||"Draft",metaData:a.metaData||{}}}}])&&o(t.prototype,a),n&&o(t,n),e}();n.initialize()},function(e,t,a){"use strict";function i(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}a.d(t,"a",(function(){return r}));var r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),e.showLoader=e.showLoader||!1,e.msg=e.msg||_x("Loading","default loader message","affiliate-for-woocommerce")}var t,a,r;return t=e,r=[{key:"showLoader",get:function(){return e._showLoader},set:function(t){return e._showLoader=Boolean(t)}},{key:"msg",get:function(){return e._msg},set:function(t){return e._msg=t}}],(a=[{key:"view",value:function(t){return m("div",{class:"fixed w-full flex flex-col left-0 top-0 h-full justify-center text-center items-center space-y-4 z-50"},e.msg?m("div",{class:"text-lg text-gray-600"},e.msg):"",m("div",{class:"text-indigo-600"},m("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-16 h-16",stroke:"currentColor",fill:"none",viewBox:"0 0 57 57"},m("g",{transform:"translate(1 1)","stroke-width":"2",fill:"none","fill-rule":"evenodd"},m("circle",{cx:"5",cy:"50",r:"5"},m("animate",{attributeName:"cy",begin:"0s",dur:"2.2s",values:"50;5;50;50",calcMode:"linear",repeatCount:"indefinite"}),m("animate",{attributeName:"cx",begin:"0s",dur:"2.2s",values:"5;27;49;5",calcMode:"linear",repeatCount:"indefinite"})),m("circle",{cx:"27",cy:"5",r:"5"},m("animate",{attributeName:"cy",begin:"0s",dur:"2.2s",from:"5",to:"5",values:"5;50;50;5",calcMode:"linear",repeatCount:"indefinite"}),m("animate",{attributeName:"cx",begin:"0s",dur:"2.2s",from:"27",to:"27",values:"27;49;5;27",calcMode:"linear",repeatCount:"indefinite"})),m("circle",{cx:"49",cy:"50",r:"5"},m("animate",{attributeName:"cy",begin:"0s",dur:"2.2s",values:"50;50;5;50",calcMode:"linear",repeatCount:"indefinite"}),m("animate",{attributeName:"cx",from:"49",to:"49",begin:"0s",dur:"2.2s",values:"49;5;27;49",calcMode:"linear",repeatCount:"indefinite"}))))))}}])&&i(t.prototype,a),r&&i(t,r),e}()},function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var i=a(0),r=a(5);function s(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var o=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),e.data={kpi:{},commissions:[]},this.params=t||{},this.fetch()}var t,a,o;return t=e,o=[{key:"reOrder",value:function(t){void 0===t&&(t=e.data.commissions);var a=[];if(t&&t.length>0&&e.data.planOrder&&e.data.planOrder.length>0)for(var i=function(i){var r=e.data.planOrder[i],s=t.filter((function(e){return e.commissionId==r}))[0];s&&a.push(s)},r=0;r<e.data.planOrder.length;r++)i(r);else a=t;e.data.commissions=a.slice()}},{key:"savePlanOrder",value:function(){return r.a.showLoader=!0,new Promise((function(t,a){i.a.requestHandler({requestData:{cmd:"save_plan_order",plan_order:JSON.stringify(e.data.planOrder),security:i.a.getAFWParams("security.commissions.savePlanOrder")||"",dashboard:"afwc_commission_controller"},callback:function(i){"Success"===i.ACK?(e.data.planOrder=i.result||[],e.reOrder(),t(i)):a(i),r.a.showLoader=!1}})}))}},{key:"data",get:function(){return e._data},set:function(t){e._data=t}}],(a=[{key:"fetch",value:function(){r.a.showLoader=!0,r.a.msg=_x("Loading Commission Plans","Loading text for commissions","affiliate-for-woocommerce"),i.a.requestHandler({requestData:{cmd:"fetch_dashboard_data",security:i.a.getAFWParams("security.commissions.fetchData")||"",dashboard:"afwc_commission_controller",commission_status:afwcDashboardParams.commission_status||""},callback:function(t){if("Success"==t.ACK){var a=t.result.commissions||[];e.data.commissions=[],e.data.planOrder=t.result.plan_order||[],e.data.planOrder=Object.keys(e.data.planOrder).map((function(t,a){return parseInt(e.data.planOrder[t])})),e.reOrder(a)}r.a.showLoader=!1}})}}])&&s(t.prototype,a),o&&s(t,o),e}();o.data={commissions:[]}},function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var i=a(0),r=a(5);function s(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var o=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),e.data={kpi:{},campaigns:[]},this.params=t||{},this.fetch()}var t,a,o;return t=e,o=[{key:"data",get:function(){return e._data},set:function(t){e._data=t}}],(a=[{key:"fetch",value:function(){r.a.showLoader=!0,r.a.msg=_x("Loading Campaigns","Loading text for campaigns","affiliate-for-woocommerce"),i.a.requestHandler({requestData:{cmd:"fetch_dashboard_data",security:i.a.getAFWParams("security.campaign.fetchData")||"",dashboard:"afwc_campaign_controller",campaign_status:afwcDashboardParams.campaign_status||""},callback:function(t){"Success"==t.ACK&&(e.data.kpi=t.result.kpi||{},e.data.campaigns=t.result.campaigns||[]),r.a.showLoader=!1}})}}])&&s(t.prototype,a),o&&s(t,o),e}();o.data={kpi:{},campaigns:[]}},function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var i=a(9),r=a(3);function s(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.initialize()}var t,a,o;return t=e,(a=[{key:"showFeedback",value:function(){"success"===r.a.notification.status&&afwcDashboardParams.can_ask_for_feedback&&(i.a.flags.showFeedback=1)}},{key:"initialize",value:function(){this.icons={success:'<svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>',error:'<svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728A9 9 0 015.636 5.636m12.728 12.728L5.636 5.636" /></svg>',warning:'<svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>'}}},{key:"renderIcon",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"warning";return e in this.icons?m.trust(this.icons[e]):""}},{key:"view",value:function(){var e=this;setTimeout((function(){if(r.a.flags.showNotification&&r.a.notification.autoHide){var t=document.getElementsByClassName("afwc-notification-close");t.length>0&&t[0].click(),e.showFeedback()}}),r.a.notification.hideDelay||8e3);var t="success"!==r.a.notification.status?"error"===r.a.notification.status?"error":"warning":"success";return m("div",{class:"fixed inset-0 flex items-end justify-center px-4 py-6 pointer-events-none sm:p-6 sm:items-start sm:justify-end",style:"z-index: 200000;"},m("div",{class:"w-full max-w-sm bg-white rounded-lg shadow-lg pointer-events-auto bottom-0 fixed"},m("div",{class:"overflow-hidden rounded-lg shadow-xs text-gray-700"},m("div",{class:("success"!==t?"error"===t?"bg-error":"bg-warning":"bg-success")+" p-4"},m("div",{class:"flex items-center"},m("div",{class:"flex-shrink-0"},this.renderIcon(t)),m("div",{class:"ml-3 flex-1"},m("p",{class:"text-sm leading-5"},r.a.notification.message)),m("div",{class:"flex flex-shrink-0 ml-4"},m("button",{type:"button",class:"afwc-notification-close inline-flex p-1 rounded-md hover:bg-gray-700 focus:outline-none transition duration-150 ease-in-out",onclick:function(){e.showFeedback(),setTimeout(r.a.flags.showNotification=0,2e3)}},m("svg",{class:"h-6 w-6 hover:text-white",stroke:"currentColor",fill:"none",viewBox:"0 0 24 24"},m("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})))))))))}}])&&s(t.prototype,a),o&&s(t,o),e}()},function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));var i=a(0);function r(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),e.initialize()}var t,a,s;return t=e,s=[{key:"initialize",value:function(){e.flags={showFeedback:0},e.data={update_action:""}}},{key:"updateFeedback",value:function(){i.a.requestHandler({requestData:{cmd:"update_feedback",security:i.a.getAFWParams("security.dashboard.updateFeedback")||"",dashboard:"afwc_dashboard_controller",update_action:e.data.update_action||""},callback:function(t){"Success"==t.ACK&&(e.flags.showFeedback=0,afwcDashboardParams.can_ask_for_feedback=0,"review"===e.data.update_action&&window.open(afwcDashboardParams.review_link))}})}}],(a=null)&&r(t.prototype,a),s&&r(t,s),e}();s.initialize()},function(e,t,a){"use strict";a.d(t,"a",(function(){return v}));var i=a(4),r=a(2),s=a(1),o=a(0);function n(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var l=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,a,i;return t=e,(a=[{key:"setFilters",value:function(e,t){if(this.startDate=document.getElementById("start-date").value,this.endDate=document.getElementById("end-date").value,"reset"==e)return s.a.data.filters={},s.a.data.q="",document.getElementById("afwc-search-field").value="",void s.a.fetch();s.a.data.filters[e]||(s.a.data.filters[e]=[]),s.a.data.filters[e].indexOf(t)>-1?s.a.data.filters[e]=s.a.data.filters[e].filter((function(e){return e!==t})):s.a.data.filters[e].push(t),s.a.data.firstcall&&s.a.data.affiliates.length<=0&&"date_filter"!==e||(s.a.data.firstcall=!1,s.a.data.start_date=this.startDate,s.a.data.end_date=this.endDate,s.a.fetch())}},{key:"view",value:function(e){var t=this;return m("div",{id:"afwc-search-panel",style:"max-width:fit-content",class:"hidden absolute w-screen px-2 mt-1 transform -translate-x-1/2 left-7/12 sm:px-0 lg:max-w-xl"},m("div",{class:"rounded-lg shadow-lg"},m("div",{class:"overflow-hidden rounded-lg shadow-xs"},m("div",{class:"relative z-20 p-5 bg-white"},m("div",{class:"flex items-center p-3 -m-3 space-x-2"},m("div",{class:"flex items-center justify-center flex-shrink-0 w-10 h-10 text-indigo-600 rounded-md"},m("svg",{class:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},m("path",{d:"M5.121 17.804A13.937 13.937 0 0112 16c2.5 0 4.847.655 6.879 1.804M15 10a3 3 0 11-6 0 3 3 0 016 0zm6 2a9 9 0 11-18 0 9 9 0 0118 0z"}))),m("div",{class:"flex items-center text-xs font-medium text-yellow-800"},Object.keys(afwcDashboardParams.afwc_filters.affiliate_status).length>0?Object.keys(afwcDashboardParams.afwc_filters.affiliate_status).map((function(e,a){return m("a",{class:"m-1 px-3 py-0.5 rounded-full cursor-pointer bg-yellow-50 hover:bg-yellow-300 "+(s.a.data.filters.affiliate_status&&-1!=s.a.data.filters.affiliate_status.indexOf(e)?"border-yellow-800 border-solid border":""),"data-filter":e,onclick:function(e){e.preventDefault(),setTimeout((function(){document.getElementById("afwc-search-field").focus()}),5e3),t.setFilters("affiliate_status",e.target.getAttribute("data-filter"))}},afwcDashboardParams.afwc_filters.affiliate_status[e])})):"")),m("div",{class:"flex items-center p-3 -m-3 space-x-2"},m("div",{class:"flex items-center justify-center flex-shrink-0 w-10 h-10 text-indigo-600 rounded-md"},m("svg",{class:"w-6 h-6",viewBox:"0 0 24 24",fill:"currentColor",stroke:"none"},m("path",{d:"M19 7h-3V6a3 3 0 0 0-3-3h-2a3 3 0 0 0-3 3v1H5a3 3 0 0 0-3 3v8a3 3 0 0 0 3 3h14a3 3 0 0 0 3-3v-8a3 3 0 0 0-3-3zm-9-1a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v1h-4zm-6 4a1 1 0 0 1 1-1h1a2 2 0 0 1-2 2zm1 9a1 1 0 0 1-1-1v-1a2 2 0 0 1 2 2zm15-1a1 1 0 0 1-1 1h-1a2 2 0 0 1 2-2zm0-3a4 4 0 0 0-4 4H8a4 4 0 0 0-4-4v-2a4 4 0 0 0 4-4h8a4 4 0 0 0 4 4zm0-4a2 2 0 0 1-2-2h1a1 1 0 0 1 1 1zm-8 0a3 3 0 1 0 3 3 3 3 0 0 0-3-3zm0 4a1 1 0 1 1 1-1 1 1 0 0 1-1 1z"}))),m("div",{class:"flex items-center text-xs font-medium text-green-800"},Object.keys(afwcDashboardParams.afwc_filters.order_status).length>0?Object.keys(afwcDashboardParams.afwc_filters.order_status).map((function(e,a){return m("a",{class:"m-1 px-3 py-0.5 rounded-full cursor-pointer bg-green-50 hover:bg-green-300 "+(s.a.data.filters.order_status&&-1!=s.a.data.filters.order_status.indexOf(e)?"border-green-800 border-solid border":""),"data-filter":e,onclick:function(e){e.preventDefault(),t.setFilters("order_status",e.target.getAttribute("data-filter"))}},afwcDashboardParams.afwc_filters.order_status[e])})):"")),m("div",{class:"flex items-center p-3 -m-3 space-x-2"},m("div",{class:"flex items-center justify-center flex-shrink-0 w-10 h-10 text-indigo-600 rounded-md"},m("svg",{class:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},m("path",{d:"M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"}))),m("div",{class:"flex flex-wrap items-center text-xs font-medium text-blue-800"},Object.keys(afwcDashboardParams.afwc_filters.tags).length>0?Object.keys(afwcDashboardParams.afwc_filters.tags).map((function(e,a){return m("a",{class:"m-1 px-3 py-0.5 rounded-full cursor-pointer bg-green-50 hover:bg-green-300 "+(s.a.data.filters.tags&&-1!=s.a.data.filters.tags.indexOf(e)?"border-blue-800 border-solid border":""),"data-filter":e,onclick:function(e){e.preventDefault(),t.setFilters("tags",e.target.getAttribute("data-filter"))}},afwcDashboardParams.afwc_filters.tags[e])})):""))),m("div",{class:"py-5 pl-7 pr-4 bg-gray-50"},m("div",{class:"flex items-center space-x-3"},m("div",{class:"w-4/5"},m("p",{class:"text-sm font-medium text-gray-900"},__("Search & Filter","affiliate-for-woocommerce")),m("p",{class:"text-xs text-gray-500"},__("Click on a label to filter. Type in the search box to search.","affiliate-for-woocommerce"))),m("div",{class:"text-xs border border-gray rounded-md px-2 py-0.5"},m("a",{class:"cursor-pointer",onclick:function(e){e.preventDefault(),t.setFilters("reset","")}},__("Reset Filters","affiliate-for-woocommerce"))))))))}}])&&n(t.prototype,a),i&&n(t,i),e}(),c=a(5),d=a(9);function u(e){return function(e){if(Array.isArray(e))return f(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return f(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return f(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,i=new Array(t);a<t;a++)i[a]=e[a];return i}function p(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var h=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,a,i;return t=e,(a=[{key:"closeFeedback",value:function(){d.a.data.update_action="close",d.a.updateFeedback()}},{key:"addReview",value:function(){d.a.data.update_action="review",d.a.updateFeedback()}},{key:"view",value:function(){var e=this;return m("div",{class:"fixed inset-0 ml-36\tflex pointer-events-none items-end justify-start px-4 py-6 sm:p-6 sm:items-start sm:justify-start "+(0===d.a.flags.showFeedback?"hidden":""),style:"z-index: 200000;"},m("div",{class:"w-full max-w-sm bg-white rounded-lg shadow-lg bottom-1 fixed pointer-events-auto"},m("div",{class:"overflow-hidden rounded-lg shadow-xs text-white"},m("div",{class:"bg-gray-800 p-4"},m("div",{class:"flex items-center justify-center"},u(Array(parseInt(5))).map((function(){return m("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"0",stroke:"currentColor",class:"w-8 h-8"},m("path",{"stroke-linecap":"round",fill:"#f0c930","stroke-linejoin":"round",d:"M11.48 3.499a.562.562 0 011.04 0l2.125 5.111a.563.563 0 00.475.345l5.518.442c.499.04.701.663.321.988l-4.204 3.602a.563.563 0 00-.182.557l1.285 5.385a.562.562 0 01-.84.61l-4.725-2.885a.563.563 0 00-.586 0L6.982 20.54a.562.562 0 01-.84-.61l1.285-5.386a.562.562 0 00-.182-.557l-4.204-3.602a.563.563 0 01.321-.988l5.518-.442a.563.563 0 00.475-.345L11.48 3.5z"}))}))),m("div",{class:"flex items-center py-2"},m("div",{class:"ml-2 flex-1"},m("p",{class:"text-base leading-5"},_x("Liked","Question asking if the user liked the plugin","affiliate-for-woocommerce")," ",m("span",{class:"text-white-900 font-bold"}," Affiliate for WooCommerce "),_x("plugin?","Question asking if the user liked the plugin","affiliate-for-woocommerce")),m("p",{class:"text-base leading-5 mt-3"},_x("Please leave a","Request the user to leave a review","affiliate-for-woocommerce")," ",m("span",{class:"font-semibold"},_x("5-star","Request asking the user to rate the plugin with 5 star","affiliate-for-woocommerce"))," ",_x("rating","Request asking the user to rate the plugin","affiliate-for-woocommerce")," ",m("a",{class:"cursor-pointer underline text-white-900 font-bold",onclick:function(){e.addReview()}},_x("here","Link to the review section for the plugin","affiliate-for-woocommerce"))," ",sprintf(_x("to motivate us! A big thanks from the %s team!","Thank you message from the plugin developer","affiliate-for-woocommerce"),"StoreApps"))),m("div",null,m("button",{type:"button",class:"afwc-feedback-close absolute top-0 right-0 inline-flex p-1 m-1 opacity-50 rounded-md hover:bg-gray-700 hover:opacity-100 focus:outline-none transition duration-150 ease-in-out",onclick:function(){e.closeFeedback()}},m("svg",{class:"h-6 w-6 text-white",stroke:"currentColor",fill:"none",viewBox:"0 0 24 24"},m("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})))))))))}}])&&p(t.prototype,a),i&&p(t,i),e}(),g=a(11);function y(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var v=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.timeout=null}var t,a,n;return t=e,(a=[{key:"refreshRoute",value:function(){s.a.data.start_date=document.getElementById("start-date").value,s.a.data.end_date=document.getElementById("end-date").value,s.a.fetch()}},{key:"setSearchTerm",value:function(e){clearTimeout(this.timeout),s.a.data.start_date=document.getElementById("start-date").value,s.a.data.end_date=document.getElementById("end-date").value,s.a.data.q=e,""===e&&s.a.fetch(),e.length<3||s.a.data.firstcall&&s.a.data.affiliates.length<=0||(c.a.showLoader=!0,this.timeout=setTimeout((function(){s.a.fetch()}),4e3))}},{key:"smartDatesHandler",value:function(e){this.smartDatesDisplayHandler();var t=o.a.getDate(e);s.a.data.start_date=t.startDate||s.a.data.start_date,s.a.data.end_date=t.endDate||s.a.data.end_date,s.a.fetch()}},{key:"smartDatesDisplayHandler",value:function(e){this.class="hidden",this.dropdownId="afwc-smart-dates-dropdown-list",document.getElementById(this.dropdownId).classList.contains(this.class)?!e&&document.getElementById(this.dropdownId).classList.remove(this.class):document.getElementById(this.dropdownId).classList.add(this.class)}},{key:"view",value:function(e){var t=this;return m("[",null,m("div",{class:"bg-gray-800"},m("nav",{class:"max-w-7xl mx-auto px-4 xl:px-8 py-2 lg:py-2"},m("div",{class:"flex flex-col lg:items-center lg:flex-row lg:justify-between"},m("div",{class:"flex items-center"},m("div",{class:"flex-shrink-0"},m("h2",{class:"text-2xl font-bold leading-7 text-gray-100 sm:text-3xl sm:leading-9"},__("Affiliates","affiliate-for-woocommerce"))),m("div",{class:""},m("div",{class:"ml-10 lg:ml-6 xl:ml-10 flex items-baseline"},m("a",{href:"#",class:"px-3 py-2 rounded-md text-md mr-2 font-medium text-white focus:outline-none focus:text-white focus:bg-gray-700 "+("/dashboard"===m.route.get()?" bg-gray-900":"")},__("Dashboard","affiliate-for-woocommerce")),m("a",{href:"#",class:"px-3 py-2 rounded-md text-md mr-2 font-medium text-white focus:outline-none focus:text-white focus:bg-gray-700 "+("/campaigns"===m.route.get()?" bg-gray-900":""),onclick:function(e){m.route.set("/campaigns"),e.preventDefault()}},__("Campaigns","affiliate-for-woocommerce")),m("a",{href:"#",class:"px-3 py-2 rounded-md text-md font-medium text-white focus:outline-none focus:text-white focus:bg-gray-700 "+("/plans"===m.route.get()?" bg-gray-900":""),onclick:function(e){m.route.set("/plans"),e.preventDefault()}},__("Plans","affiliate-for-woocommerce"))))),m("div",{class:"flex items-center text-right mt-2 lg:mt-0"},"/campaigns"===m.route.get()?m("div",{class:"flex items-center mt-2 text-right lg:mt-0"},m("div",{class:"mr-4"},m("span",{class:"rounded-md shadow-sm"},m("button",{type:"button",class:"inline-flex justify-center w-full px-4 py-1 text-sm font-medium leading-5 text-white transition duration-150 ease-in-out bg-indigo-600 border border-transparent rounded-md hover:bg-indigo-500 focus:outline-none focus:shadow-outline-indigo",onclick:function(){i.a.newCampaign()}},m("svg",{class:"w-5 h-5 mr-2",stroke:"currentColor",fill:"none",viewBox:"0 0 24 24","stroke-width":"2"},m("path",{d:"M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01"})),__("Add a Campaign","affiliate-for-woocommerce"))))):"","/plans"===m.route.get()?m("div",{class:"flex items-center mt-2 text-right lg:mt-0"},m("div",{class:"mr-4"},m("span",{class:"rounded-md shadow-sm"},m("button",{type:"button",class:"inline-flex justify-center w-full px-4 py-1 text-sm font-medium leading-5 text-white transition duration-150 ease-in-out bg-indigo-600 border border-transparent rounded-md hover:bg-indigo-500 focus:outline-none focus:shadow-outline-indigo",onclick:function(){r.a.newCommission()}},m("svg",{class:"w-5 h-5 mr-2",stroke:"currentColor",fill:"none",viewBox:"0 0 24 24","stroke-width":"2"},m("path",{d:"M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01"})),__("Add a Plan","affiliate-for-woocommerce"))))):"","/dashboard"===m.route.get()?m("div",{class:"flex items-center px-1 text-sm text-gray-400 lg:mx-2 xl:mx-2"},m("div",{class:"flex py-1 lg:ml-0 bg-gray-900 lg:mx-2 xl:mx-3 rounded-md"},m("div",{class:"relative w-full"},m("div",{class:"absolute inset-y-0 left-0 flex items-center pointer-events-none"},m("svg",{class:"w-5 h-5 ml-1",fill:"currentColor",viewBox:"0 0 20 20"},m("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z"}))),m("input",{onfocusin:function(){document.getElementById("afwc-search-panel").classList.remove("hidden")},oninput:function(e){t.setSearchTerm(e.target.value)},id:"afwc-search-field",class:"py-1 pr-3 text-xs bg-transparent border-transparent form-input pl-7 focus:bg-white focus:border-gray-200",placeholder:_x("Search & Filter","placeholder for search & filter","affiliate-for-woocommerce")}))),m("div",{class:"flex items-center bg-white text-gray-700 text-sm lg:mx-2 xl:mx-3 border-gray-400 rounded-md"},m("div",{class:"flex items-center"},m("div",null,m("input",{id:"start-date",type:"date",value:s.a.data.start_date,class:"form-input w-20 sm:leading-5 pt-2 pb-1 px-1 text-xs bg-transparent border-transparent focus:outline-none focus:shadow-none cursor-pointer",placeholder:_x("start date","placeholder","affiliate-for-woocommerce"),onchange:function(){t.refreshRoute()},onfocusin:function(e){e.target.showPicker(),t.smartDatesDisplayHandler(!0)}})),m("div",{class:"px-1 sm:leading-5 pointer-events-none text-gray-400"},__("to","affiliate-for-woocommerce")),m("div",null,m("input",{id:"end-date",type:"date",value:s.a.data.end_date,class:"form-input w-20 sm:leading-5 pt-2 pb-1 px-1 text-xs bg-transparent border-transparent focus:outline-none focus:shadow-none cursor-pointer",placeholder:_x("end date","placeholder","affiliate-for-woocommerce"),onchange:function(){t.refreshRoute()},onfocusin:function(e){e.target.showPicker(),t.smartDatesDisplayHandler(!0)}})),m("div",{class:"border-l border-gray-300"},m("svg",{id:"afwc-smart-dates-dropdown-icon",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6 px-1 text-gray-500 cursor-pointer focus:outline-none cursor-pointer",onclick:function(){t.smartDatesDisplayHandler()}},m("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 8.25l-7.5 7.5-7.5-7.5"})),m("ul",{id:"afwc-smart-dates-dropdown-list",class:"afwSmartDatesDropdown absolute text-left bg-white border border-gray-200 rounded-lg shadow-lg py-2 mt-1 cursor-pointer hidden"},m("li",{onclick:function(){t.smartDatesHandler("today")}},m("span",null,_x("Today","smart dates option","affiliate-for-woocommerce"))),m("li",{onclick:function(){t.smartDatesHandler("yesterday")}},m("span",null,_x("Yesterday","smart dates option","affiliate-for-woocommerce"))),m("li",{class:"separator my-2 h-px bg-gray-200"}),m("li",{onclick:function(){t.smartDatesHandler("this_week")}},m("span",null,_x("This Week","smart dates option","affiliate-for-woocommerce"))),m("li",{onclick:function(){t.smartDatesHandler("last_week")}},m("span",null,_x("Last Week","smart dates option","affiliate-for-woocommerce"))),m("li",{onclick:function(){t.smartDatesHandler("last_4_week")}},m("span",null,_x("Last 4 Weeks","smart dates option","affiliate-for-woocommerce"))),m("li",{class:"separator my-2 h-px bg-gray-200"}),m("li",{onclick:function(){t.smartDatesHandler("this_month")}},m("span",null,_x("This Month","smart dates option","affiliate-for-woocommerce"))),m("li",{onclick:function(){t.smartDatesHandler("last_month")}},m("span",null,_x("Last Month","smart dates option","affiliate-for-woocommerce"))),m("li",{class:"separator my-2 h-px bg-gray-200"}),m("li",{onclick:function(){t.smartDatesHandler("3_months")}},m("span",null,_x("3 Months","smart dates option","affiliate-for-woocommerce"))),m("li",{onclick:function(){t.smartDatesHandler("6_months")}},m("span",null,_x("6 Months","smart dates option","affiliate-for-woocommerce"))),m("li",{class:"separator my-2 h-px bg-gray-200"}),m("li",{onclick:function(){t.smartDatesHandler("this_year")}},m("span",null,_x("This Year","smart dates option","affiliate-for-woocommerce"))),m("li",{onclick:function(){t.smartDatesHandler("last_year")}},m("span",null,_x("Last Year","smart dates option","affiliate-for-woocommerce")))))))):"",m("div",{class:"flex items-center ml-4 lg:ml-2"},m("a",{href:"https://woocommerce.com/document/affiliate-for-woocommerce/",target:"_blank",title:__("Docs","affiliate-for-woocommerce"),class:"p-1 ml-3 border-transparent text-gray-400 rounded-full hover:text-gray-500 focus:outline-none focus:text-gray-500 transition duration-150 ease-in-out"},m("svg",{class:"h-6 w-6",stroke:"currentColor",fill:"none",viewBox:"0 0 24 24"},m("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"}))),m("a",{href:afwcDashboardParams.settingsLink,target:"_blank",title:__("Settings","affiliate-for-woocommerce"),class:"ml-3 p-1 border-transparent text-gray-400 rounded-full hover:text-gray-500 focus:outline-none focus:text-gray-500 transition duration-150 ease-in-out"},m("svg",{class:"h-6 w-6",stroke:"currentColor",fill:"none",viewBox:"0 0 24 24"},m("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),m("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}))))))),m(l,null),c.a.showLoader?m(c.a,null):null,m(h,null)),(afwcDashboardParams.show_admin_notice||afwcDashboardParams.show_admin_notice_for_dates)&&afwcDashboardParams.is_action_scheduler_exists?m(g.a,null):null)}}])&&y(t.prototype,a),n&&y(t,n),e}()},function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));var i=a(0);function r(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var s=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.showLoader=!1,this.progress=0,this.interval=0,this.isProcessRunning=parseInt(i.a.getAFWParams("is_process_running"))>0,this.isDashboardNotice=t.attrs.dashboardNotice||!1,!0===this.isDashboardNotice?i.a.getAFWParams("show_masspay_deprecated_notice")&&(this.msg=_x("If you have already switched to the new PayPal Payout API,","ask to check whether switched to the PayPal Payout API","affiliate-for-woocommerce"),this.actionText=_x("run migration.","Link text for PayPal Payout migration","affiliate-for-woocommerce"),this.event=this.checkPayoutMethod):!0===this.isProcessRunning?(this.msg=__("Migration process is running:","affiliate-for-woocommerce"),this.startProgressTracking()):(this.msg=this.msg?this.msg:__("[Important] Affiliate for WooCommerce requires a database migration. To start, please click ","affiliate-for-woocommerce"),this.actionText=__("Run Migration.","affiliate-for-woocommerce"),this.event=this.runMigration)}var t,a,s;return t=e,(a=[{key:"runMigration",value:function(e){var t=this;this.isProcessRunning?e.preventDefault():(this.progress=0,this.isProcessRunning=!0,this.msg=__("Migration process is running:","affiliate-for-woocommerce"),m.request({method:"POST",url:ajaxurl,params:{action:"afwc_run_migration"},withCredentials:!1,responseType:"json"}).then((function(e){t.startProgressTracking()})))}},{key:"checkPayoutMethod",value:function(){var e=this;m.request({method:"POST",url:i.a.getAFWParams("ajaxurl")||"",params:{action:"afwc_update_payout_method",security:i.a.getAFWParams("security.dashboard.updatePayoutMethod")||""},responseType:"json"}).then((function(){return e.hideNotice()}))}},{key:"hideNotice",value:function(){this.msg=!1}},{key:"startProgressTracking",value:function(){var e=this;this.interval=setInterval((function(){return"All"!==e.progress&&e.checkProgress()}),1e4)}},{key:"checkProgress",value:function(){var e=this;m.request({method:"POST",url:ajaxurl,params:{action:"afwc_check_migration_process"},responseType:"json"}).then((function(t){e.progress=t.afwc_order_migration_status||0,"All"===e.progress&&(e.msg=__("Migration done successfully.","affiliate-for-woocommerce"),setTimeout((function(){e.hideNotice(),m.redraw()}),5e3))}))}},{key:"view",value:function(){var e=this;return this.msg?m("div",{id:"afwc-migration-notice",class:"m-5 w-auto bg-white px-6 py-4 border-l-4 border-blue-700\t"},!0===this.isDashboardNotice?m("[",null,m("p",{class:"text-sm font-medium text-gray-600"},_x("[PayPal Payouts] PayPal have deprecated MassPay API and it will be removed soon. So we recommend you switch to a new Payout API for smoother commission payouts.","PayPal Payout migration notice","affiliate-for-woocommerce")),m("p",{class:"text-sm font-medium text-gray-600"},_x("Refer to","refer to the provided doc","affiliate-for-woocommerce"),m("a",{class:"cursor-pointer px-1 text-sm font-medium leading-6 text-indigo-600 hover:text-indigo-800",target:"_blank",href:"https://woocommerce.com/document/affiliate-for-woocommerce/how-to-payout-commissions-in-affiliate-for-woocommerce/"},_x("this doc","link text for the doc","affiliate-for-woocommerce")),_x("for more details.","text for more details regarding PayPal API migration","affiliate-for-woocommerce"))):"",m("span",{class:"text-sm font-medium text-gray-600 "},this.msg||""),m("a",{class:(this.isProcessRunning?"cursor-not-allowed text-indigo-500 hidden ":"")+" cursor-pointer px-1 text-sm font-medium leading-6 text-indigo-600 hover:text-indigo-800 ",onclick:function(t){e.event.call(e,t)}},this.actionText),m("span",{id:"afwc-progress",class:(this.isProcessRunning?"":"invisible")+" text-sm font-medium text-gray-600 pl-2"}," ",this.progress?this.progress+__(" tasks completed","affiliate-for-woocommerce"):__(" tasks starting","affiliate-for-woocommerce"))):""}}])&&r(t.prototype,a),s&&r(t,s),e}()},function(e,t,a){"use strict";a.d(t,"a",(function(){return De}));var i=a(10),r=a(1);function s(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,a,i;return t=e,(a=[{key:"showNumberPlaceholder",value:function(){return m("div",{class:"afw-kpi-placeholder h-4 w-8"})}},{key:"showTextPlaceholder",value:function(){return m("div",{class:"afw-kpi-placeholder h-4 w-16"})}},{key:"view",value:function(){return m("header",{class:"bg-white shadow"},m("div",{class:"max-w-7xl mx-auto py-8 sm:px-3 xl:px-8"},m("section",{class:"md:flex md:items-center md:justify-between"},m("div",{class:"flex sm:items-top"},m("div",{class:"font-bold leading-tight text-gray-900"},m("p",{class:"text-5xl leading-none font-bold text-indigo-700 flex items-center "},r.a.isKPILoading?this.showNumberPlaceholder():m("[",null,m("span",{class:"text-2xl font-normal mr-1"},afwcDashboardParams.currencySymbol||"")," ",r.a.data.kpi.net_affiliates_sales||0," ",m("span",{class:"text-2xl font-medium ml-1"}))),m("p",{class:"mt-1 leading-tight font-medium text-gray-500"},r.a.isKPILoading?this.showTextPlaceholder():sprintf(_x("%1$s%% of Total Revenue","Affiliates KPI label: Total Revenue","affiliate-for-woocommerce"),r.a.data.kpi.percent_of_total_sales||0)))),m("div",{class:"flex sm:items-center text-gray-400"},m("div",{class:""},m("p",{class:"text-2xl leading-none font-bold text-gray-700"},r.a.isKPILoading?this.showNumberPlaceholder():r.a.data.kpi.affiliates_count||0),m("p",{class:"mt-1 leading-6 font-medium text-gray-500"},r.a.isKPILoading?this.showTextPlaceholder():_x("Affiliates","Affiliates KPI label: Number of affiliate","affiliate-for-woocommerce"))),m("svg",{class:"fill-current w-3 h-3 mx-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 320 512"},m("path",{d:"M285.476 272.971L91.132 467.314c-9.373 9.373-24.569 9.373-33.941 0l-22.667-22.667c-9.357-9.357-9.375-24.522-.04-33.901L188.505 256 34.484 101.255c-9.335-9.379-9.317-24.544.04-33.901l22.667-22.667c9.373-9.373 24.569-9.373 33.941 0L285.475 239.03c9.373 9.372 9.373 24.568.001 33.941z"})),m("div",{class:""},m("p",{class:"text-2xl leading-none font-bold text-gray-700"},r.a.isKPILoading?this.showNumberPlaceholder():r.a.data.kpi.visitors_count||0),m("p",{class:"mt-1 leading-6 font-medium text-gray-500"},r.a.isKPILoading?this.showTextPlaceholder():_x("Visitors","Affiliates KPI label: Visitors","affiliate-for-woocommerce"))),m("svg",{class:"fill-current w-3 h-3 mx-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 320 512"},m("path",{d:"M285.476 272.971L91.132 467.314c-9.373 9.373-24.569 9.373-33.941 0l-22.667-22.667c-9.357-9.357-9.375-24.522-.04-33.901L188.505 256 34.484 101.255c-9.335-9.379-9.317-24.544.04-33.901l22.667-22.667c9.373-9.373 24.569-9.373 33.941 0L285.475 239.03c9.373 9.372 9.373 24.568.001 33.941z"})),m("div",{class:""},m("p",{class:"text-2xl leading-none font-bold text-gray-700"},r.a.isKPILoading?this.showNumberPlaceholder():r.a.data.kpi.all_customers_count||0),m("p",{class:"mt-1 leading-6 font-medium text-gray-500"},r.a.isKPILoading?this.showTextPlaceholder():_x("Customers","Affiliates KPI label: Customers","affiliate-for-woocommerce"))),m("svg",{class:"fill-current w-3 h-3 mx-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 320 512"},m("path",{d:"M285.476 272.971L91.132 467.314c-9.373 9.373-24.569 9.373-33.941 0l-22.667-22.667c-9.357-9.357-9.375-24.522-.04-33.901L188.505 256 34.484 101.255c-9.335-9.379-9.317-24.544.04-33.901l22.667-22.667c9.373-9.373 24.569-9.373 33.941 0L285.475 239.03c9.373 9.372 9.373 24.568.001 33.941z"})),m("div",{class:""},m("p",{class:"text-2xl leading-none font-bold text-gray-700"},r.a.isKPILoading?this.showNumberPlaceholder():"".concat(r.a.data.kpi.conversion_rate||0,"%")),m("p",{class:"mt-1 leading-6 font-medium text-gray-500"},r.a.isKPILoading?this.showTextPlaceholder():_x("Conversion Rate","Affiliates KPI label: Conversion Rate","affiliate-for-woocommerce")))))))}}])&&s(t.prototype,a),i&&s(t,i),e}();function n(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var l=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,a,i;return t=e,(a=[{key:"view",value:function(){return m("div",{class:"my-3 mx-3 py-2 rounded-md"},m("div",{class:"flex items-center"},m("div",{class:"flex-shrink-0 flex items-center justify-center h-6 w-6 rounded-full bg-teal-50 text-teal-500"},m("svg",{class:"h-4 w-4",stroke:"currentColor",fill:"none",viewBox:"0 0 24 24"},m("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}))),m("h3",{class:"ml-1 text-base leading-6 font-medium text-teal-500"},__("Pending Payouts","affiliate-for-woocommerce"))),m("div",{class:"mt-2"},m("p",{class:"text-sm leading-5 text-gray-400"},r.a.data.kpi.unpaid_affiliates," ",1===parseInt(r.a.data.kpi.unpaid_affiliates)?__("affiliate","affiliate-for-woocommerce"):__("affiliates","affiliate-for-woocommerce")," ",__("needs to be paid total commission of","affiliate-for-woocommerce")," ",afwcDashboardParams.currencySymbol,r.a.data.kpi.unpaid_commissions,".")))}}])&&n(t.prototype,a),i&&n(t,i),e}();function c(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var d=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,a,i;return t=e,(a=[{key:"loadAffiliates",value:function(){r.a.data.currentPage=parseInt(r.a.data.currentPage)+1,r.a.data.action="load_more",r.a.fetch()}},{key:"view",value:function(){var e=this;return m("nav",{class:"py-3 text-gray-500 max-h-screen overflow-auto"},m("ul",null,r.a.data.affiliates.map((function(e,t){return m("li",{class:(0===t?"rounded-tl-lg ":r.a.data.affiliates.length-1===t?"rounded-bl-lg ":"")+"border-b border-gray-200 bg-gray-50 overflow-hidden",onclick:function(){r.a.data.currentAffiliateID=e.affiliate_id}},m("a",{href:"#",class:"block py-3 hover:bg-white focus:outline-none focus:bg-white transition duration-150 ease-in-out"+(r.a.data.currentAffiliateID==e.affiliate_id?" bg-white outline-none":"")},m("div",{class:"flex items-center pl-4 py-2"},m("div",{class:(e.pending?"text-red-400 ":r.a.data.currentAffiliateID==e.affiliate_id?"text-gray-700 ":"")+"font-medium pr-4 flex-1 sm:truncate"},e.name),m("div",{class:(e.pending?"text-red-400 ":parseFloat(e.earned_commissions)>0?"text-teal-500 ":"text-gray-500")+"text-sm leading-none numeric"},afwcDashboardParams.currencySymbol,e.earned_commissions),m("div",{class:"mx-2"},m("svg",{class:"h-5 w-5 text-gray-400",fill:"currentColor",viewBox:"0 0 20 20"},m("path",{"fill-rule":"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z","clip-rule":"evenodd"}))))))}))),r.a.data.loadMore&&r.a.data.affiliates.length>0&&r.a.data.affiliates.length%afwcDashboardParams.affiliate_list_limit==0?m("div",{class:"my-3"},m("div",{class:"pb-2 text-center border-b border-gray-200 text-center"},m("a",{class:"py-2 px-4 text-sm font-medium text-indigo-400 uppercase cursor-pointer",onclick:function(){e.loadAffiliates()}},__("Load More","affiliate-for-woocommerce")))):"")}}])&&c(t.prototype,a),i&&c(t,i),e}(),u=a(0);function f(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var p=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),e.initialize(),this.params=t||{}}var t,a,i;return t=e,i=[{key:"initialize",value:function(){e.flags={loadMore:!0,clearSelections:!1,moreReferralLoaded:!1}}},{key:"flags",get:function(){return e._flags},set:function(t){e._flags=t}}],(a=[{key:"fetch",value:function(){var t=this;this.isLoadMore=this.params.currentPage&&1<parseInt(this.params.currentPage),this.isLoadMore||L.triggerLoader("referrals",!0),u.a.requestHandler({requestData:{dashboard:"afwc_dashboard_controller",cmd:"order_details",security:u.a.getAFWParams("security.dashboard.orderDetails")||"",from_date:u.a.getDateTime(this.params.startDate,{dayStart:!0})||"",to_date:u.a.getDateTime(this.params.endDate,{dayEnd:!0})||"",affiliate_id:this.params.id||0,page:this.params.currentPage||1},callback:function(a){a.length>0?(e.flags.moreReferralLoaded=!0,L.details.referrals=t.isLoadMore?L.details.referrals.concat(a):a):(e.flags.moreReferralLoaded=!1,e.flags.loadMore=!1),t.isLoadMore||L.triggerLoader("referrals",!1)}})}},{key:"updateCommissionStatus",value:function(){var t=this,a=new FormData,i={cmd:"update_commission_status",security:u.a.getAFWParams("security.dashboard.updateCommissionStatus")||"",referral_ids:JSON.stringify(this.params.ids),affiliate_id:r.a.data.currentAffiliateID,status:this.params.status};for(var s in i)a.append(s,i[s]);return new Promise((function(i,s){m.request({method:"POST",url:ajaxurl,params:{action:"afwc_dashboard_controller"},body:a,withCredentials:!1,responseType:"json"}).then((function(a){if("Success"===a.ACK){var o=Number(parseFloat(L.details.stats.current.unpaid_commissions||0).toFixed(2)),n=Number(parseFloat(L.details.stats.current.earned_commissions||0).toFixed(2)),l=Number(parseFloat(L.details.stats.allTime.unpaid_commissions||0).toFixed(2)),c=Number(parseFloat(L.details.stats.allTime.paid_commissions||0).toFixed(2)),m=Number(parseFloat(r.a.data.kpi.unpaid_commissions||0).toFixed(2)),d=0;L.details.referrals.forEach((function(e,a){-1!==t.params.ids.indexOf(e.referral_id)&&(d=Number(parseFloat(L.details.referrals[a].commission||0).toFixed(2)),"unpaid"===t.params.status&&"unpaid"!==L.details.referrals[a].status?(L.details.stats.current.unpaid_commissions=Number(parseFloat(o+d).toFixed(2)),L.details.stats.allTime.unpaid_commissions=Number(parseFloat(l+d).toFixed(2)),r.a.data.kpi.unpaid_commissions=Number(parseFloat(m+d).toFixed(2))):"unpaid"!==t.params.status&&"unpaid"===L.details.referrals[a].status&&(L.details.stats.current.unpaid_commissions=o>0?Number(parseFloat(o-d).toFixed(2)):o,L.details.stats.allTime.unpaid_commissions=l>0?Number(parseFloat(l-d).toFixed(2)):l,r.a.data.kpi.unpaid_commissions=m>0?Number(parseFloat(m-d).toFixed(2)):m),"rejected"===t.params.status&&"rejected"!==L.details.referrals[a].status?L.details.stats.current.earned_commissions=n>0?Number(parseFloat(n-d).toFixed(2)):n:"rejected"!==t.params.status&&"rejected"===L.details.referrals[a].status&&(L.details.stats.current.earned_commissions=Number(parseFloat(n+d).toFixed(2))),"paid"===t.params.status&&"paid"!==L.details.referrals[a].status?L.details.stats.allTime.paid_commissions=Number(parseFloat(c+d).toFixed(2)):"paid"!==t.params.status&&"paid"===L.details.referrals[a].status&&(L.details.stats.allTime.paid_commissions=c>0?Number(parseFloat(c-d).toFixed(2)):c),n=L.details.stats.current.earned_commissions,o=L.details.stats.current.unpaid_commissions,L.details.referrals[a].status=t.params.status)})),L.details.stats.current.unpaid_commissions=parseFloat(L.details.stats.current.unpaid_commissions).toFixed(2),L.details.stats.allTime.unpaid_commissions=parseFloat(L.details.stats.allTime.unpaid_commissions).toFixed(2),L.details.stats.allTime.paid_commissions=parseFloat(L.details.stats.allTime.paid_commissions).toFixed(2),r.a.data.kpi.unpaid_commissions=parseFloat(r.a.data.kpi.unpaid_commissions).toFixed(2),e.flags.clearSelections=!0,i(a)}else s(a)}))}))}}])&&f(t.prototype,a),i&&f(t,i),e}();p.initialize();var h=a(3);function g(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function y(e,t,a){return t&&g(e.prototype,t),a&&g(e,a),e}var v=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),e.initialize(),this.params=t||{}}return y(e,null,[{key:"initialize",value:function(){e.flags={loadMore:!0,PayoutProcessed:!1}}}]),y(e,[{key:"fetch",value:function(){var t=this;this.isLoadMore=this.params.currentPage&&1<parseInt(this.params.currentPage),this.isLoadMore||L.triggerLoader("payouts",!0),u.a.requestHandler({requestData:{dashboard:"afwc_dashboard_controller",cmd:"payout_details",security:u.a.getAFWParams("security.dashboard.payoutDetails")||"",from_date:u.a.getDateTime(this.params.startDate,{dayStart:!0})||"",to_date:u.a.getDateTime(this.params.endDate,{dayEnd:!0})||"",affiliate_id:this.params.id||0,page:this.params.currentPage||1},callback:function(a){a.length>0?L.details.payouts=t.isLoadMore?L.details.payouts.concat(a):a:e.flags.loadMore=!1,t.isLoadMore||L.triggerLoader("payouts",!1)}})}},{key:"processPayout",value:function(){var t=this,a=new FormData,i={cmd:"process_payout",security:u.a.getAFWParams("security.dashboard.processPayout")||"",method:this.params.method,affiliate:JSON.stringify(this.params.affiliate),currency:this.params.currency,selected_referrals:JSON.stringify(this.params.selectedReferrals),date:u.a.getDateTime(this.params.date),note:this.params.note};for(var s in i)a.append(s,i[s]);return new Promise((function(i){m.request({method:"POST",url:ajaxurl,params:{action:"afwc_dashboard_controller"},body:a,withCredentials:!1,responseType:"json"}).then((function(a){if("Success"===a.ACK&&Object.keys(a.last_added_payout_data).length>0){var s=Number(parseFloat(L.details.stats.current.unpaid_commissions||0).toFixed(2)),o=Number(parseFloat(L.details.stats.allTime.unpaid_commissions||0).toFixed(2)),n=Number(parseFloat(L.details.stats.allTime.paid_commissions||0).toFixed(2)),l=Number(parseFloat(r.a.data.kpi.unpaid_commissions||0).toFixed(2)),c=a.last_added_payout_data.hasOwnProperty("amount")?Number(parseFloat(a.last_added_payout_data.amount||0).toFixed(2)):0,m=t.params.selectedReferrals.map((function(e){return e.referral_id||0}));L.details.stats.current.unpaid_commissions=s>0?Number(parseFloat(s-c).toFixed(2)):s,L.details.stats.allTime.unpaid_commissions=o>0?Number(parseFloat(o-c).toFixed(2)):o,L.details.stats.allTime.paid_commissions=n>0?Number(parseFloat(n+c).toFixed(2)):n,r.a.data.kpi.unpaid_commissions=l>0?Number(parseFloat(l-c).toFixed(2)):l,L.details.payouts.unshift(a.last_added_payout_data),L.details.referrals.map((function(e,t){e.referral_id&&m.indexOf(e.referral_id)>-1&&(L.details.referrals[t].status="paid")})),L.details.stats.current.unpaid_commissions=parseFloat(L.details.stats.current.unpaid_commissions).toFixed(2),L.details.stats.allTime.unpaid_commissions=parseFloat(L.details.stats.allTime.unpaid_commissions).toFixed(2),L.details.stats.allTime.paid_commissions=parseFloat(L.details.stats.allTime.paid_commissions).toFixed(2),r.a.data.kpi.unpaid_commissions=parseFloat(r.a.data.kpi.unpaid_commissions).toFixed(2),e.flags.PayoutProcessed=!0,h.a.show({status:"success",message:_x("Payout processed successfully","Notification message for successful payout","affiliate-for-woocommerce")})}else e.flags.PayoutProcessed=!1,h.a.show({status:"error",message:a.error});i(a)}))}))}}],[{key:"flags",get:function(){return e._flags},set:function(t){e._flags=t}}]),e}();function w(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}v.initialize();var x=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};w(this,e),this.params=t||{}}var t,a,i;return t=e,(a=[{key:"fetch",value:function(){L.triggerLoader("top-products",!0),u.a.requestHandler({requestData:{dashboard:"afwc_dashboard_controller",cmd:"top_products",security:u.a.getAFWParams("security.dashboard.topProducts")||"",from_date:u.a.getDateTime(this.params.startDate,{dayStart:!0})||"",to_date:u.a.getDateTime(this.params.endDate,{dayEnd:!0})||"",affiliate_id:this.params.id||0},callback:function(e){if("Success"===e.ACK){var t=e.data||{};L.details.products=Object.entries(t).length>0?t:{}}L.triggerLoader("top-products",!1)}})}}])&&b(t.prototype,a),i&&b(t,i),e}();function _(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function k(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var P=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_(this,e),this.params=t||{}}var t,a,i;return t=e,(a=[{key:"fetch",value:function(){L.triggerLoader("profile",!0),u.a.requestHandler({requestData:{dashboard:"afwc_dashboard_controller",cmd:"profile_data",security:u.a.getAFWParams("security.dashboard.profileData")||"",affiliate_id:this.params.id||0},callback:function(e){if("Success"===e.ACK){var t=e.data||{};Object.entries(t).length>0&&(L.details.tags=t.tags||{},L.details.coupons=t.coupons||{},L.details.isReferralCouponEnabled=t.is_referral_coupon_enabled||"",L.details.isLTCEnabled=t.is_ltc_enabled||"no",L.details.ltcCustomers=t.ltc_customers||{},L.details.isLTCEnabledForAffiliate=t.is_ltc_enabled_for_affiliate||!1)}L.triggerLoader("profile",!1)}})}},{key:"unlinkCustomersLTC",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";e&&(h.a.hide(),L.details.ltcCustomers[e].isProcessing=!0,u.a.requestHandler({requestData:{dashboard:"afwc_dashboard_controller",cmd:"unlink_ltc_customers",security:u.a.getAFWParams("security.dashboard.unlinkLTCCustomers")||"",affiliate_id:this.params.id||0,customer:e},callback:function(t){var a="Success"===t.ACK;a&&e in L.details.ltcCustomers?delete L.details.ltcCustomers[e]:L.details.ltcCustomers[e].isProcessing=!1,h.a.show({status:a?"success":"error",message:a?_x("Customer unlinked successfully","Success message for removal of linked lifetime commission customer","affiliate-for-woocommerce"):t.msg||_x("Customer can't be unlinked","Error message for failing of the unlinking the customer for lifetime commissions","affiliate-for-woocommerce")})}}))}},{key:"linkCustomersLTC",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(e){h.a.hide();var t=e.id||e.email;t&&u.a.requestHandler({requestData:{dashboard:"afwc_dashboard_controller",cmd:"link_ltc_customers",security:u.a.getAFWParams("security.dashboard.linkLTCCustomers")||"",affiliate_id:this.params.id||0,customer:t},callback:function(a){var i="Success"===a.ACK;i&&(L.details.ltcCustomers[t]=e),h.a.show({status:i?"success":"error",message:i?_x("Customer linked successfully","Success message after linking the customer for lifetime commissions","affiliate-for-woocommerce"):a.msg||_x("Customer can't be linked","Error message for failing of linking the customer for lifetime commissions","affiliate-for-woocommerce")})}})}}}])&&k(t.prototype,a),i&&k(t,i),e}();function C(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function D(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var I=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};C(this,e),this.params=t||{},this.affiliateID=this.params.id||0}var t,a,i;return t=e,(a=[{key:"fetch",value:function(){this.affiliateID&&(L.triggerLoader("multi-tier",!0),u.a.requestHandler({requestData:{dashboard:"afwc_dashboard_controller",cmd:"affiliate_chain_data",security:u.a.getAFWParams("security.dashboard.multiTierData")||"",affiliate_id:this.affiliateID},callback:function(e){if("Success"===e.ACK){var t=e.data||{};Object.entries(t).length>0&&(L.details.multiTierChain=t.multiTierChain||{})}L.triggerLoader("multi-tier",!1)}}))}}])&&D(t.prototype,a),i&&D(t,i),e}();function O(e){return function(e){if(Array.isArray(e))return T(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return T(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return T(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function T(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,i=new Array(t);a<t;a++)i[a]=e[a];return i}function j(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var S=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.params={id:t.attrs.id||0},e.isInitializedSelectWoo=!1}var t,a,i;return t=e,i=[{key:"isInitializedSelectWoo",get:function(){return e._isInitializedSelectWoo},set:function(t){return e._isInitializedSelectWoo=t}}],(a=[{key:"oninit",value:function(){new P(this.params).fetch()}},{key:"unlinkCustomersLTC",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";new P({id:L.details.affiliateId}).unlinkCustomersLTC(e)}},{key:"linkCustomersLTC",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};new P({id:L.details.affiliateId}).linkCustomersLTC(e)}},{key:"intializeSelectwoo",value:function(){var t=this,a=jQuery(".afwc-customer-search");if(a.length&&!e.isInitializedSelectWoo){var i={placeholder:a.attr("placeholder")||"",dropdownParent:jQuery(".afwc-ltc-search-container"),minimumInputLength:3,escapeMarkup:function(e){return e},ajax:{url:u.a.getAFWParams("ajaxurl")||"",dataType:"json",delay:1e3,data:function(e){return{term:e.term||"",action:"afwc_dashboard_controller",cmd:"search_ltc_customers",security:u.a.getAFWParams("security.dashboard.searchLTCCustomers")||""}},processResults:function(e){var t=[];if(e&&"Success"===e.ACK){var a=e.data||{};jQuery.each(a,(function(e,a){t.push({id:a.id||a.email||"",text:a.text||"",email:a.email||"",name:a.name||""})}))}return{results:t}},cache:!0}};a.selectWoo(i),a.on("select2:select",(function(e){var i=e.params.data;a.val([]).trigger("change"),t.linkCustomersLTC(i)})),a.on("select2:selecting",(function(e){var t=e.params.args.data||{};parseInt(t.id)===parseInt(L.details.affiliateId)&&(confirm(_x("Are you sure you want to link the same affiliate as a lifetime customer?","self linking alert","affiliate-for-woocommerce"))||e.preventDefault())})),e.isInitializedSelectWoo=!0}}},{key:"onupdate",value:function(e){this.intializeSelectwoo()}},{key:"showPlaceholder",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3;return parseInt(e)>0?m("[",null,O(Array(parseInt(e))).map((function(){return m("div",{class:"flex"},m("div",{class:"afw-placeholder m-2 h-8 w-1/5"}),m("div",{class:"afw-placeholder m-2 h-8 w-4/5"}))}))):""}},{key:"searchLTCCustomerComponent",value:function(){return m("div",{class:"afwc-ltc-search-container flex-1 w-full"},m("select",{id:"afwc_customer_search",class:"afwc-customer-search wc-enhanced-select w-full py-1 pl-3 pr-8 text-sm leading-5 text-gray-500 bg-transparent form-select w-full block",placeholder:L.details.isLTCEnabledForAffiliate?_x("Search and Link customer","placeholder for searching the customer","affiliate-for-woocommerce"):_x("Lifetime commission is disabled for the affiliate","placeholder of disabling the customer search","affiliate-for-woocommerce"),multiple:"multiple",style:"width: 100%",disabled:!L.details.isLTCEnabledForAffiliate}))}},{key:"view",value:function(){var e=this;return m("section",{class:"my-5 overflow-x-auto"},L.isLoading("profile")?this.showPlaceholder():m("div",{class:"overflow-auto"},m("table",null,m("tbody",{class:"bg-white"},L.details.referralURL?m("tr",null,m("td",{class:"px-4 py-3 text-sm font-medium leading-5 text-gray-600 whitespace-no-wrap"},_x("Referral Link","Admin Dashboard: Referral link label","affiliate-for-woocommerce")),m("td",{class:"px-4 py-3 text-sm leading-5 text-gray-500 whitespace-no-wrap numeric"},m("div",{class:"mt-1 text-xs text-left text-gray-500"},m("span",{"data-bs-toggle":"tooltip",title:_x("Click to copy","Admin - tooltip title for copying referral link","affiliate-for-woocommerce"),onclick:function(e){u.a.doCopy(L.details.referralURL||"")},class:"cursor-pointer"},m("code",null,L.details.referralURL))))):"","yes"===L.details.isReferralCouponEnabled?m("tr",null,m("td",{class:"px-4 py-3 text-sm font-medium leading-5 text-gray-600"},_x("Referral Coupons","Admin Dashboard: Referral coupons label","affiliate-for-woocommerce")),m("td",{class:"px-4 py-3 text-sm leading-5 text-gray-500 flex flex-wrap numeric"},Object.keys(L.details.coupons).length>0?Object.keys(L.details.coupons).map((function(e){return m("span",{class:"m-1 px-2 py-0.5 font-mono"},L.details.coupons[e])})):_x("No coupons assigned","empty coupon message","affiliate-for-woocommerce"))):"",m("tr",null,m("td",{class:"px-4 py-3 text-sm font-medium leading-5 text-gray-600"},_x("Tags","Admin Dashboard: Affiliate tags label","affiliate-for-woocommerce")),m("td",{class:"px-4 py-3 text-sm leading-5 text-gray-500 flex flex-wrap"},Object.keys(L.details.tags).length>0?Object.keys(L.details.tags).map((function(e){return m("span",{class:"m-1 px-3 py-0.5 rounded-full bg-gray-50"},L.details.tags[e])})):_x("No tags assigned","empty tags message","affiliate-for-woocommerce"))),"yes"===L.details.isLTCEnabled?m("tr",null,m("td",{class:"px-4 py-5 text-sm font-medium leading-5 text-gray-600 align-top whitespace-no-wrap"},_x("Lifetime Customers","Admin Dashboard: Lifetime customers label","affiliate-for-woocommerce")),m("td",{class:"afwc-ltc-customers-section px-4 py-3 text-sm leading-5 text-gray-500 flex flex-wrap max-w-screen-sm"},this.searchLTCCustomerComponent(),m("div",{class:"w-full overflow-auto max-h-44 my-4"},m("div",{class:"grid grid-cols-2 w-full gap-4"},Object.values(L.details.ltcCustomers).map((function(t){return m("div",{class:"p-2 h-12 border border-gray-200 flex items-center justify-between ".concat(t.isProcessing?"opacity-50":"")},m("div",null,m("p",{class:"font-medium"},t.name||t.email||""),t.name?m("p",{class:"text-gray-500"},t.email||""):""),m("div",{class:"flex flex-col text-xs items-end"},m("a",{class:"text-red-500 underline cursor-pointer",onclick:function(){return e.unlinkCustomersLTC(t.id||t.email)}},m("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6"},m("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9.75 9.75l4.5 4.5m0-4.5l-4.5 4.5M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})))))})))))):""))))}}])&&j(t.prototype,a),i&&j(t,i),e}();function A(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var L=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),e.initialize(),this.params=t||{}}var t,a,i;return t=e,i=[{key:"initialize",value:function(){e.details={name:"",email:"",affiliateId:0,editURL:"",referralURL:"",paypalEmail:"",avatarURL:"",lastPayoutDetails:{},formattedJoinDuration:"",stats:{current:{},allTime:{}},referrals:[],payouts:[],tags:{},coupons:{},commission:{},products:{},loader:{referrals:!0,payouts:!1,"top-products":!1,profile:!1,"multi-tier":!1,KPI:!1},multiTierChain:{},ltcCustomers:{}}}},{key:"triggerLoader",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];t&&(e.details.loader[t]=a)}},{key:"isLoading",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return!!t&&t in e.details.loader&&e.details.loader[t]}},{key:"details",get:function(){return e._details},set:function(t){e._details=t}}],(a=[{key:"reload",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"referrals";new e(this.params).fetch(t),S.isInitializedSelectWoo=!1}},{key:"loadSectionData",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"referrals";switch(e){case"referrals":new p(this.params).fetch();break;case"payouts":new v(this.params).fetch();break;case"top-products":new x(this.params).fetch();break;case"profile":new P(this.params).fetch();break;case"multi-tier":new I(this.params).fetch()}}},{key:"fetch",value:function(){var t=this,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"referrals";e.triggerLoader("KPI",!0),e.triggerLoader(a,!0);var i={dashboard:"afwc_dashboard_controller",cmd:"affiliate_details",security:u.a.getAFWParams("security.dashboard.affiliateDetails")||"",from_date:u.a.getDateTime(this.params.startDate,{dayStart:!0}),to_date:u.a.getDateTime(this.params.endDate,{dayEnd:!0}),affiliate_id:this.params.id||0};u.a.requestHandler({requestData:i,callback:function(r){t.extractData(r),i.cmd="affiliate_kpi_details",i.security=u.a.getAFWParams("security.dashboard.affiliateKPIData")||"",u.a.requestHandler({requestData:i,callback:function(a){t.extractKPIDetails(a),e.triggerLoader("KPI",!1)}}),t.loadSectionData(a)}})}},{key:"extractKPIDetails",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.details.stats=t.stats||{current:{},allTime:{}}}},{key:"extractData",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.details={name:t.name||"",email:t.email||"",affiliateId:t.affiliate_id||0,editURL:t.edit_url||"",referralURL:t.referral_url||"",paypalEmail:t.paypal_email||"",avatarURL:t.avatar_url||"",lastPayoutDetails:t.last_payout_details||{},stats:t.stats||{current:{},allTime:{}},formattedJoinDuration:t.formatted_join_duration||"",referrals:t.orders_details||[],payouts:t.payout_history||[],tags:t.tags||{},coupons:t.coupons||{},commission:t.commission||{},products:t.top_products||{},loader:{referrals:e.isLoading("referrals")||!1,payouts:e.isLoading("payouts")||!1,"top-products":e.isLoading("top-products")||!1,profile:e.isLoading("profile")||!1,KPI:e.isLoading("KPI")||!1,"multi-tier":e.isLoading("multi-tier")||!1},multiTierChain:{},ltcCustomers:{}},t.pending&&(e.details.pending=t.pending)}}])&&A(t.prototype,a),i&&A(t,i),e}();function M(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}L.initialize();var F=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),e.isOrdersTab=!0,this.tabCss="whitespace-no-wrap py-4 px-1 border-b-2 font-medium text-sm text-gray-400 leading-5 focus:outline-none focus:text-indigo-800 focus:shadow-none focus:border-indigo-700"}var t,a,i;return t=e,i=[{key:"isOrdersTab",get:function(){return e._isOrdersTab},set:function(t){e._isOrdersTab=t}}],(a=[{key:"view",value:function(){return m("header",{class:"flex justify-between border-b border-gray-200 -mx-6 px-6"},m("div",{class:"flex-shrink-0 mb-2 p-1 border-2 border-transparent"},L.details.avatarURL?m("img",{class:"h-12 w-12 rounded-full",src:L.details.avatarURL,alt:_x("Affiliate profile image","affiliate profile image","affiliate-for-woocommerce")}):""),m("div",{class:"flex-1 ml-3 mb-2"},m("div",{class:"flex items-center"},m("h3",{class:"text-l block font-bold leading-6 text-gray-900 sm:py-2 sm:text-3xl sm:leading-6 sm:truncate"},L.details.name),m("span",{class:L.details.pending?"invisible ":"visible hidden xl:inline-flex ml-3 px-2 text-xs leading-5 font-semibold rounded-full bg-teal-100 text-teal-500"},__("Net Unpaid Commission","affiliate-for-woocommerce"),": ",afwcDashboardParams.currencySymbol,L.details.stats.current.unpaid_commissions||"0.00")),L.details.referralURL?m("div",{class:"flex items-center mt-1 py-2"},m("div",{class:"text-gray-500 text-xs"},__("Referral Link: ","affiliate-for-woocommerce"),m("span",{"data-bs-toggle":"tooltip",title:_x("Click to copy","Admin - tooltip title for copying referral link","affiliate-for-woocommerce"),onclick:function(e){u.a.doCopy(L.details.referralURL||"")},class:"cursor-pointer"},m("code",null,L.details.referralURL)))):""),m("div",{class:"flex items-start"},m("a",{href:"mailto:"+L.details.email,target:"_blank",title:"Email Affiliate",class:"p-1 border-2 border-transparent text-gray-400 rounded-full hover:text-gray-500 focus:outline-none focus:text-gray-500 transition duration-150 ease-in-out"},m("svg",{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",class:"w-6 h-6"},m("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"}))),m("a",{href:L.details.editURL,target:"_blank",title:"Manage Affiliate",class:"ml-3 p-1 border-2 border-transparent text-gray-400 rounded-full hover:text-gray-500 focus:outline-none focus:text-gray-500 transition duration-150 ease-in-out"},m("svg",{class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},m("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5.121 17.804A13.937 13.937 0 0112 16c2.5 0 4.847.655 6.879 1.804M15 10a3 3 0 11-6 0 3 3 0 016 0zm6 2a9 9 0 11-18 0 9 9 0 0118 0z"})))))}}])&&M(t.prototype,a),i&&M(t,i),e}();function R(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function z(e,t,a){return t&&R(e.prototype,t),a&&R(e,a),e}F.isOrdersTab=!0;var N=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.initialize()}return z(e,[{key:"initialize",value:function(){this.revenue=L.details.stats.current.net_affiliates_sales||"0.00",this.commission=String(L.details.stats.current.earned_commissions||"0.00"),this.gross_commission=String(L.details.stats.current.gross_commissions||"0.00")}}]),z(e,[{key:"showNumberPlaceholder",value:function(){return m("div",{class:"afw-placeholder h-4 w-8"})}},{key:"showTextPlaceholder",value:function(){return m("div",{class:"afw-placeholder h-4 w-16"})}},{key:"view",value:function(){return this.initialize(),m("section",{class:"flex flex-col lg:flex-row lg:items-center lg:justify-between text-sm my-6 text-gray-800"},m("div",{class:"flex items-center justify-between"},m("div",{class:"mr-3"},m("p",{class:"text-2xl leading-none font-medium"},L.isLoading("KPI")?this.showNumberPlaceholder():L.details.stats.current.visitors_count||0),m("p",{class:"mt-1 leading-6 text-gray-400"},L.isLoading("KPI")?this.showTextPlaceholder():_x("Visitors","Affiliate KPI label: Visitors","affiliate-for-woocommerce"))),m("svg",{class:"text-gray-300 fill-current w-3 h-3 mx-3",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 320 512"},m("path",{d:"M285.476 272.971L91.132 467.314c-9.373 9.373-24.569 9.373-33.941 0l-22.667-22.667c-9.357-9.357-9.375-24.522-.04-33.901L188.505 256 34.484 101.255c-9.335-9.379-9.317-24.544.04-33.901l22.667-22.667c9.373-9.373 24.569-9.373 33.941 0L285.475 239.03c9.373 9.372 9.373 24.568.001 33.941z"})),m("div",{class:"ml-3"},m("p",{class:"text-2xl leading-none font-medium"},L.isLoading("KPI")?this.showNumberPlaceholder():L.details.stats.current.customers_count||0),m("p",{class:"mt-1 leading-6 text-gray-400"},L.isLoading("KPI")?this.showTextPlaceholder():_x("Customers","Affiliate KPI label: Customers","affiliate-for-woocommerce"))),m("svg",{class:"text-gray-300 fill-current w-3 h-3 mx-3",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 320 512"},m("path",{d:"M285.476 272.971L91.132 467.314c-9.373 9.373-24.569 9.373-33.941 0l-22.667-22.667c-9.357-9.357-9.375-24.522-.04-33.901L188.505 256 34.484 101.255c-9.335-9.379-9.317-24.544.04-33.901l22.667-22.667c9.373-9.373 24.569-9.373 33.941 0L285.475 239.03c9.373 9.372 9.373 24.568.001 33.941z"})),m("div",{class:"ml-3"},m("p",{class:"text-2xl leading-none font-medium"},L.isLoading("KPI")?this.showNumberPlaceholder():"".concat(L.details.stats.current.conversion_rate||0,"%")),m("p",{class:"mt-1 leading-6 text-gray-400"},L.isLoading("KPI")?this.showTextPlaceholder():_x("Conversion","Affiliate KPI label: Conversion","affiliate-for-woocommerce")))),m("div",{class:"flex items-center justify-between mt-6 lg:mt-0"},m("div",{class:"flex sm:items-center"},m("div",{class:""},m("p",{class:"text-2xl leading-none font-medium flex items-center"},L.isLoading("KPI")?this.showNumberPlaceholder():m("[",null,m("span",{class:"text-sm font-normal text-gray-600 mr-1"},afwcDashboardParams.currencySymbol||"")," ",this.revenue.split(".")[0]," ",m("span",{class:"text-sm"},".",this.revenue.split(".")[1]))),m("p",{class:"mt-1 leading-6 text-gray-400"},L.isLoading("KPI")?this.showTextPlaceholder():_x("Revenue","Affiliate KPI label: Revenue","affiliate-for-woocommerce")))),m("svg",{class:"text-gray-300 fill-current w-3 h-3 mx-3",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 320 512"},m("path",{d:"M285.476 272.971L91.132 467.314c-9.373 9.373-24.569 9.373-33.941 0l-22.667-22.667c-9.357-9.357-9.375-24.522-.04-33.901L188.505 256 34.484 101.255c-9.335-9.379-9.317-24.544.04-33.901l22.667-22.667c9.373-9.373 24.569-9.373 33.941 0L285.475 239.03c9.373 9.372 9.373 24.568.001 33.941z"})),m("div",{class:""},m("p",{class:"text-2xl leading-none font-medium flex items-center"},L.isLoading("KPI")?this.showNumberPlaceholder():m("[",null,m("span",{class:"text-sm font-normal text-gray-600 mr-1"},afwcDashboardParams.currencySymbol||"")," ",this.gross_commission.split(".")[0]," ",m("span",{class:"text-sm"},".",this.gross_commission.split(".")[1]))),m("p",{class:"mt-1 leading-6 text-gray-400"},L.isLoading("KPI")?this.showTextPlaceholder():_x("Gross Commission","Affiliate KPI label: Gross Commission","affiliate-for-woocommerce"))),m("svg",{class:"text-gray-300 fill-current w-3 h-3 mx-3",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 320 512"},m("path",{d:"M285.476 272.971L91.132 467.314c-9.373 9.373-24.569 9.373-33.941 0l-22.667-22.667c-9.357-9.357-9.375-24.522-.04-33.901L188.505 256 34.484 101.255c-9.335-9.379-9.317-24.544.04-33.901l22.667-22.667c9.373-9.373 24.569-9.373 33.941 0L285.475 239.03c9.373 9.372 9.373 24.568.001 33.941z"})),m("div",{class:""},m("p",{class:"text-2xl leading-none font-medium flex items-center"},L.isLoading("KPI")?this.showNumberPlaceholder():m("[",null,m("span",{class:"text-sm font-normal text-gray-600 mr-1"},afwcDashboardParams.currencySymbol||"")," ",this.commission.split(".")[0]," ",m("span",{class:"text-sm"},".",this.commission.split(".")[1]))),m("p",{class:"mt-1 leading-6 text-gray-400"},L.isLoading("KPI")?this.showTextPlaceholder():_x("Net Commission","Affiliate KPI label: Net Commission","affiliate-for-woocommerce")))))}}]),e}();function E(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var B=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),e.activeTab="referrals";var t="flex flex-row whitespace-no-wrap px-6 py-4 block cursor-pointer font-medium text-base text-gray-500 leading-none border-x-0 border-t-0 border-b-2 border-transparent hover:text-indigo-800 focus:outline-none focus:shadow-none focus:border-indigo-400 focus:text-indigo-800 focus:border-transparent";this.activeTabCSS=t+" text-indigo-600 border-indigo-400",this.inactiveTabCSS=t+" border-transparent"}var t,a,i;return t=e,i=[{key:"activeTab",get:function(){return e._activeTab},set:function(t){e._activeTab=t}}],(a=[{key:"view",value:function(){return L.details.pending?"":m("div",{class:"-mx-6 border-b border-t"},m("nav",{class:"-mb-px flex flex-center mx-6"},m("a",{class:"referrals"===e.activeTab?this.activeTabCSS:this.inactiveTabCSS,onclick:function(){e.activeTab="referrals"}},m("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},m("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"})),m("span",null,_x("Referrals","Admin - tab title","affiliate-for-woocommerce"))),m("a",{class:"payouts"===e.activeTab?this.activeTabCSS:this.inactiveTabCSS,onclick:function(){e.activeTab="payouts"}},m("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},m("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"})),m("span",null,_x("Payouts","Admin - tab title","affiliate-for-woocommerce"))),m("a",{class:"top-products"===e.activeTab?this.activeTabCSS:this.inactiveTabCSS,onclick:function(){e.activeTab="top-products"}},m("svg",{class:"w-4 h-4 mr-2",fill:"none",viewBox:"0 0 20 20"},m("path",{d:"M4.46 5.16L5 7.46l-.54 2.29l2.01 1.24L7.7 13l2.3-.54l2.3.54l1.23-2.01l2.01-1.24L15 7.46l.54-2.3l-2-1.24l-1.24-2.01l-2.3.55l-2.29-.54l-1.25 2zm5.55 6.34a3.999 3.999 0 1 1 0-8c2.2 0 3.99 1.79 3.99 3.99c0 2.22-1.79 4.01-3.99 4.01zm-.02-1C8.33 10.5 7 9.16 7 7.5c0-1.65 1.33-3 2.99-3S13 5.85 13 7.5c0 1.66-1.35 3-3.01 3zm3.84 1.1l-1.28 2.24l-2.08-.47L13 19.2l1.4-2.2h2.5zm-7.7.07l1.25 2.25l2.13-.51L7 19.2L5.6 17H3.1z",fill:"currentColor"})),m("span",null,_x("Top Products","Admin - tab title","affiliate-for-woocommerce"))),m("a",{class:"profile"===e.activeTab?this.activeTabCSS:this.inactiveTabCSS,onclick:function(){e.activeTab="profile"}},m("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},m("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5.121 17.804A13.937 13.937 0 0112 16c2.5 0 4.847.655 6.879 1.804M15 10a3 3 0 11-6 0 3 3 0 016 0zm6 2a9 9 0 11-18 0 9 9 0 0118 0z"})),m("span",null,_x("Profile","Admin - tab title","affiliate-for-woocommerce"))),m("a",{class:"multi-tier"===e.activeTab?this.activeTabCSS:this.inactiveTabCSS,onclick:function(){e.activeTab="multi-tier"}},m("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},m("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})),m("span",null,_x("Multi-Tier","Admin - tab title","affiliate-for-woocommerce")))))}}])&&E(t.prototype,a),i&&E(t,i),e}();function W(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}B.activeTab="referrals";var q=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,a,i;return t=e,(a=[{key:"view",value:function(){return L.details.products.rows&&Object.entries(L.details.products.rows).length>0?m("table",{class:"min-w-full"},m("thead",null,m("tr",null,m("th",{class:"px-6 py-3 border-b border-gray-200 bg-gray-50 text-left text-xs leading-4 font-medium text-gray-500 uppercase tracking-wider"},__("Product","affiliate-for-woocommerce")),m("th",{class:"px-6 py-3 border-b border-gray-200 bg-gray-50 text-right text-xs leading-4 font-medium text-gray-500 uppercase tracking-wider"},__("Quantity","affiliate-for-woocommerce")),m("th",{class:"px-6 py-3 border-b border-gray-200 bg-gray-50 text-right text-xs leading-4 font-medium text-gray-500 uppercase tracking-wider"},__("Sales","affiliate-for-woocommerce")))),m("tbody",{class:"bg-white"},Object.keys(L.details.products).length>0&&Object.keys(L.details.products.rows).length>0?Object.keys(L.details.products.rows).map((function(e){return m("tr",null,m("td",{class:"px-6 py-3 text-sm font-medium leading-5 text-gray-600 whitespace-no-wrap border-b border-gray-200"},L.details.products.rows[e].product||""),m("td",{class:"px-6 py-3 text-sm font-medium text-right leading-5 text-gray-500 whitespace-no-wrap border-b border-gray-200 numeric"},L.details.products.rows[e].quantity||0),m("td",{class:"px-6 py-3 text-sm leading-5 text-right text-gray-500 whitespace-no-wrap border-b border-gray-200 numeric"},afwcDashboardParams.currencySymbol,L.details.products.rows[e].sales||0))})):"")):m("p",{class:"py-8 text-sm text-center text-gray-500"},_x("No products found","empty product message","affiliate-for-woocommerce"))}}])&&W(t.prototype,a),i&&W(t,i),e}();function K(e){return function(e){if(Array.isArray(e))return H(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return H(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return H(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function H(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,i=new Array(t);a<t;a++)i[a]=e[a];return i}function G(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var U=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.params={id:t.attrs.id||0,startDate:t.attrs.startDate||"",endDate:t.attrs.endDate||""}}var t,a,i;return t=e,(a=[{key:"oninit",value:function(){new x(this.params).fetch()}},{key:"showPlaceholder",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:4;return m("[",null,m("div",{class:"afw-placeholder m-2 h-8"}),m("div",{class:"flex"},parseInt(e)>0?K(Array(parseInt(e))).map((function(){return m("div",{class:"afw-placeholder m-2 h-8 w-1/4"})})):""),m("div",{class:"flex"},parseInt(e)>0?K(Array(parseInt(e))).map((function(){return m("div",{class:"afw-placeholder m-2 h-8 w-1/4"})})):""))}},{key:"view",value:function(){return m("section",{class:"my-5 overflow-x-auto"},L.isLoading("top-products")?this.showPlaceholder():m(q,null))}}])&&G(t.prototype,a),i&&G(t,i),e}();function V(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var Y=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),e.initialize()}var t,a,i;return t=e,i=[{key:"initialize",value:function(){e.selectedRecords={ids:{},commission:0,unpaidCommission:0,selectAll:!1,payoutCurrencySymbol:"",payoutCurrencyCode:"",IsMultiCurrencyDetected:!1}}},{key:"isMultiCurrencySelected",value:function(){var t="";return!!e.selectedRecords.ids&&Boolean(Object.keys(e.selectedRecords.ids).find((function(a){var i=e.selectedRecords.ids[a].currency||"";return(t=t||i)!==i})))}},{key:"handleRowSelection",value:function(t,a){t=Array.isArray(t)?t:[t],e.selectedRecords.selectAll=!!(t.length>1&&a),t.map((function(t){e.selectedRecords.ids.hasOwnProperty(t.referral_id)&&!a?delete e.selectedRecords.ids[t.referral_id]:!1===e.selectedRecords.ids.hasOwnProperty(t.referral_id)&&a&&(e.selectedRecords.ids[t.referral_id]={commission:Number(parseFloat(t.commission).toFixed(2)),orderId:t.order_id||0,pendingPayout:"unpaid"===t.status,date:t.datetime,status:t.status,currency:t.currency||"",currencyCode:t.currencyCode||""})})),e.calculateCommissions()}},{key:"calculateCommissions",value:function(){var t=0,a=0;Object.keys(e.selectedRecords.ids).map((function(i){var r=e.selectedRecords.ids[i],s=r.commission,o=r.status;s&&(t="rejected"!==o?Number(parseFloat(t+s).toFixed(2)):t,a="unpaid"===o?Number(parseFloat(a+s).toFixed(2)):a)})),e.selectedRecords.commission=parseFloat(t).toFixed(2),e.selectedRecords.unpaidCommission=parseFloat(a).toFixed(2),Object.keys(e.selectedRecords.ids).length>0&&(e.selectedRecords.payoutCurrencySymbol=Object.values(e.selectedRecords.ids)[0].currency||"",e.selectedRecords.payoutCurrencyCode=Object.values(e.selectedRecords.ids)[0].currencyCode||""),e.selectedRecords.IsMultiCurrencyDetected=e.isMultiCurrencySelected()}},{key:"selectedRecords",get:function(){return e._selectedRecords},set:function(t){e._selectedRecords=t}}],(a=[{key:"printCommissionStatus",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=u.a.getAFWParams("commissionStatuses")||{};return e in t?t[e]:""}},{key:"view",value:function(){var t=this;return L.details.referrals&&L.details.referrals.length>0?m("table",{class:"min-w-full"},m("thead",null,m("tr",null,m("th",{class:"pl-6 pr-0 py-3 border-b border-gray-200 bg-gray-50 w-6 flex-0"},m("input",{id:"select[0]",checked:e.selectedRecords.selectAll,type:"checkbox",class:"form-checkbox h-4 w-4 text-indigo-600 transition duration-150 ease-in-out",onclick:function(t){e.handleRowSelection(L.details.referrals,t.target.checked)}})),m("th",{class:"px-6 py-3 border-b border-gray-200 bg-gray-50 text-left text-xs leading-4 font-medium text-gray-500 uppercase tracking-wider"},__("Date","affiliate-for-woocommerce")),m("th",{class:"px-6 py-3 border-b border-gray-200 bg-gray-50 text-left text-xs leading-4 font-medium text-gray-500 uppercase tracking-wider"},__("Order","affiliate-for-woocommerce")),m("th",{class:"px-6 py-3 border-b border-gray-200 bg-gray-50 text-left text-xs leading-4 font-medium text-gray-500 uppercase tracking-wider"},__("Commission","affiliate-for-woocommerce")),m("th",{class:"hidden xl:table-cell px-6 py-3 border-b border-gray-200 bg-gray-50 text-left text-xs leading-4 font-medium text-gray-500 uppercase tracking-wider"},__("Customer","affiliate-for-woocommerce")),m("th",{class:"px-6 py-3 border-b border-gray-200 bg-gray-50 text-left text-xs leading-4 font-medium text-gray-500 uppercase text-right"},__("Medium","affiliate-for-woocommerce")))),m("tbody",{class:"bg-white"},L.details.referrals.map((function(a){return m("tr",null,m("td",{class:"pl-6 pr-0 py-4 whitespace-no-wrap border-b border-gray-200 text-sm leading-5 text-gray-800 w-6 flex-0"},m("input",{id:"select[".concat(a.referral_id||"","]"),checked:e.selectedRecords.ids.hasOwnProperty(a.referral_id),type:"checkbox",class:"form-checkbox h-4 w-4 text-indigo-600 transition duration-150 ease-in-out",onclick:function(t){e.handleRowSelection(a,t.target.checked)}})),m("td",{class:"px-6 py-4 whitespace-no-wrap border-b border-gray-200 text-sm leading-5 text-gray-500"},m("time",{datetime:a.datetime},a.datetime)),m("td",{class:"px-6 py-4 whitespace-no-wrap border-b border-gray-200 text-sm leading-5 text-gray-800"},m("div",{class:"flex items-center"},m("a",{href:a.order_url,target:"_blank",class:"text-indigo-600 hover:text-indigo-900 focus:outline-none focus:underline numeric"},"#",a.order_id),m("span",{class:"ml-3 text-gray-600"},a.order_status),m("span",{class:"hidden xl:inline-block ml-3"},a.currency,u.a.formatNumber(a.order_total)))),m("td",{class:"px-6 py-4 whitespace-no-wrap border-b border-gray-200 text-sm leading-5 text-gray-500"},m("span",{class:("rejected"===a.status?"line-through ":"")+"font-medium"},a.currency,u.a.formatNumber(a.commission)),m("span",{class:("rejected"===a.status?"text-red-400":"unpaid"===a.status?"text-teal-400":"text-gray-400")+" ml-3"},t.printCommissionStatus(a.status))),m("td",{class:"hidden xl:table-cell px-6 py-4 whitespace-no-wrap border-b border-gray-200 text-sm leading-5 text-gray-500 truncate"},a.customer_orders_url?m("a",{href:a.customer_orders_url,target:"_blank",class:"text-indigo-600 hover:text-indigo-900 focus:outline-none focus:underline numeric"},a.billing_name):m("span",null,a.billing_name)),m("td",{class:"px-6 py-4 whitespace-no-wrap border-b border-gray-200 text-xs uppercase leading-5 text-gray-500 text-right"},a.referral_type))})))):m("p",{class:"py-8 text-sm text-center text-gray-500"},_x("No referrals found","empty referral message","affiliate-for-woocommerce"))}}])&&V(t.prototype,a),i&&V(t,i),e}();Y.initialize();var J=a(5);function Q(e,t,a,i,r,s,o){try{var n=e[s](o),l=n.value}catch(e){return void a(e)}n.done?t(l):Promise.resolve(l).then(i,r)}function $(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function X(e,t,a){return t&&$(e.prototype,t),a&&$(e,a),e}var Z=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),e.initializeFlags(),this.initialize(t.attrs)}var t,a;return X(e,[{key:"initialize",value:function(e){this.commission=e.commission||"0.00",this.name=e.name||"",this.defaultDate=(new Date).toISOString().slice(0,10),this.recordDate=this.recordDate||this.defaultDate}}],[{key:"initializeFlags",value:function(){e.flags={show:!1,payoutMethod:""!=L.details.paypalEmail?"paypal":"paypal-manual",disablePayout:!1}}}]),X(e,[{key:"onupdate",value:function(e){this.initialize(e.attrs)}},{key:"getPayoutMethods",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t={paypal:{title:_x("PayPal: Pay & Record","Admin: Payout method title","affiliate-for-woocommerce"),desc:_x("Automatically pay via PayPal and record payout.","Payout method description: PayPal pay & record","affiliate-for-woocommerce"),disabled:0===(L.details.paypalEmail?L.details.paypalEmail.length:0)},"paypal-manual":{title:_x("PayPal: Record Only","Admin: Payout method title","affiliate-for-woocommerce"),desc:_x("Record a manual payout done via PayPal. This method does not send money.","Payout method description: PayPal record only","affiliate-for-woocommerce")},other:{title:_x("Other","Admin: Payout method title","affiliate-for-woocommerce"),desc:_x("Record a manual payout done via any method. This method does not send money.","Payout method description: other","affiliate-for-woocommerce")}};return"string"==typeof e&&e.length>0?e in t&&t[e]||"":t}},{key:"processPayout",value:(t=regeneratorRuntime.mark((function t(a){var i,r,s,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),i=[],r=[],s=0,Object.keys(Y.selectedRecords.ids).map((function(e){Y.selectedRecords.ids[e]&&Y.selectedRecords.ids[e].pendingPayout&&(s+=parseFloat(Y.selectedRecords.ids[e].commission),r.push(e),i.push({referral_id:e,order_id:Y.selectedRecords.ids[e].orderId||0,commission:Y.selectedRecords.ids[e].commission||0,date:Y.selectedRecords.ids[e].date||""}))})),o={affiliate:{id:L.details.affiliateId,email:L.details.paypalEmail,amount:s,unique_id:"afwc_mass_payment"},selectedReferrals:i,selectedReferralIds:r,method:e.flags.payoutMethod,currency:Y.selectedRecords.payoutCurrencyCode||"",date:"date"===a.target[1].type?a.target[1].value:"",note:"textarea"===a.target[1].type?a.target[1].value:a.target[2].value},e.flags.disablePayout=!0,J.a.showLoader=!0,J.a.msg=_x("Processing","payout processing loader message","affiliate-for-woocommerce"),t.next=9,new v(o).processPayout();case 9:e.flags.disablePayout=!1,J.a.showLoader=!1;case 11:case"end":return t.stop()}}),t)})),a=function(){var e=this,a=arguments;return new Promise((function(i,r){var s=t.apply(e,a);function o(e){Q(s,i,r,o,n,"next",e)}function n(e){Q(s,i,r,o,n,"throw",e)}o(void 0)}))},function(e){return a.apply(this,arguments)})},{key:"view",value:function(t){var a=this;return v.flags.PayoutProcessed&&(e.initializeFlags(),this.initialize(t.attrs),v.flags.PayoutProcessed=!1),e.flags.show?m("div",{class:"modal fixed w-full h-full top-0 left-0 sm:flex sm:items-center sm:justify-center"},m("div",{class:"modal-overlay absolute w-full h-full top-0 left-0 bg-gray-800 opacity-50"}),m("div",{"x-show":"open",class:"bg-white rounded-lg overflow-hidden shadow-xl transform transition-all sm:max-w-2xl"},m("form",{class:"px-6 py-6 m-auto shadow rounded-lg bg-white border",onsubmit:this.processPayout},m("div",null,m("h3",{class:"text-lg leading-6 font-medium text-gray-900"},__("Pay","affiliate-for-woocommerce")," ",m("strong",null,Y.selectedRecords.payoutCurrencySymbol||"",u.a.formatNumber(this.commission))," to ",m("strong",null,this.name))),m("div",{class:"mt-6 sm:mt-5"},m("div",{class:"mt-4 sm:mt-3"},m("div",{class:"mt-4 sm:mt-3 sm:grid sm:grid-cols-3 sm:gap-4 sm:items-start sm:pt-5"},m("label",{for:"method",class:"block text-sm font-medium leading-5 text-gray-500 sm:mt-px sm:pt-2"},__("Payment Method","affiliate-for-woocommerce")),m("div",{class:"mt-1 sm:mt-0 sm:col-span-2"},m("div",{class:"max-w-xs rounded-md shadow-sm"},m("select",{id:"method",class:"block form-select w-full transition duration-150 ease-in-out sm:text-sm sm:leading-5",onchange:function(t){e.flags.payoutMethod=t.target.value}},Object.keys(this.getPayoutMethods()).map((function(e){return m("option",{value:e||"",disabled:a.getPayoutMethods()[e].disabled||!1},a.getPayoutMethods()[e].title||e)})))),this.getPayoutMethods(e.flags.payoutMethod)&&this.getPayoutMethods(e.flags.payoutMethod).desc?m("p",{class:"mt-1 max-w-2xl w-64 text-xs leading-5 text-gray-500"},this.getPayoutMethods(e.flags.payoutMethod).desc):"")),"paypal"!==e.flags.payoutMethod?m("div",{class:"sm:grid sm:grid-cols-3 sm:gap-4 sm:items-start sm:pt-5"},m("label",{for:"date",class:"block text-sm font-medium leading-5 text-gray-500 sm:mt-px sm:pt-2"},__("Record Date","affiliate-for-woocommerce")),m("div",{class:"mt-1 sm:mt-0 sm:col-span-2"},m("div",{class:"max-w-xs rounded-md shadow-sm"},m("input",{type:"date",value:this.recordDate||this.defaultDate,class:"form-input w-full sm:leading-5 py-1 text-xs bg-transparent focus:bg-white focus:border-gray-200",onchange:function(e){a.recordDate=e.target.value||a.defaultDate},placeholder:_x("Select payout date","placeholder: payout date","affiliate-for-woocommerce")})))):"",m("div",{class:"mt-4 sm:mt-3 sm:grid sm:grid-cols-3 sm:gap-4 sm:items-start sm:pt-5"},m("label",{for:"notes",class:"block text-sm font-medium leading-5 text-gray-500 sm:mt-px sm:pt-2"},__("Notes","affiliate-for-woocommerce")),m("div",{class:"mt-1 sm:mt-0 sm:col-span-2"},m("div",{class:"max-w-xs rounded-md shadow-sm"},m("textarea",{id:"notes",rows:"3",class:"form-textarea block w-full transition duration-150 ease-in-out sm:text-sm sm:leading-5 p-2"})))),m("div",{class:"mt-8 border-t border-gray-200 pt-5"},m("div",{class:"flex justify-end"},m("span",{class:"inline-flex rounded-md shadow-sm"},m("button",{type:"button",class:"py-2 px-4 border border-gray-300 rounded-md text-sm leading-5 font-medium text-gray-500 hover:text-gray-700 focus:outline-none focus:border-indigo-300 focus:shadow-outline-indigo active:bg-gray-50 active:text-gray-800 transition duration-150 ease-in-out ".concat(e.flags.disablePayout?"opacity-50 cursor-not-allowed":""),disabled:e.flags.disablePayout||!1,onclick:function(){e.flags.show=!1}},__("Cancel","affiliate-for-woocommerce"))),m("span",{class:"ml-3 inline-flex rounded-md shadow-sm"},m("button",{type:"submit",class:"inline-flex justify-center py-2 px-6 border border-transparent text-sm leading-5 font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-500 focus:outline-none focus:border-indigo-700 focus:shadow-outline-indigo active:bg-indigo-700 transition duration-150 ease-in-out ".concat(e.flags.disablePayout?"opacity-50 cursor-not-allowed":""),disabled:e.flags.disablePayout||!1},__("Send","affiliate-for-woocommerce")))))))))):""}}],[{key:"flags",get:function(){return e._flags},set:function(t){e._flags=t}}]),e}();function ee(e){return function(e){if(Array.isArray(e))return te(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return te(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return te(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function te(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,i=new Array(t);a<t;a++)i[a]=e[a];return i}function ae(e,t,a,i,r,s,o){try{var n=e[s](o),l=n.value}catch(e){return void a(e)}n.done?t(l):Promise.resolve(l).then(i,r)}function ie(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}Z.initializeFlags();var re=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.params={id:t.attrs.id||0,startDate:t.attrs.startDate||"",endDate:t.attrs.endDate||"",currentPage:0,batchAction:"paid"}}var t,a,i,r,s;return t=e,(a=[{key:"oninit",value:function(){L.details.stats.current&&Object.values(L.details.stats.current).length>0?this.loadReferrals():this.params.currentPage++}},{key:"loadReferrals",value:function(){this.params.currentPage++,new p(this.params).fetch()}},{key:"onupdate",value:function(e){var t=this.params.id;this.params=Object.assign(this.params,e.attrs),t!=e.attrs.id&&(this.params.currentPage=1)}},{key:"updateCommissionStatus",value:(r=regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(Object.keys(Y.selectedRecords.ids).length>0)){e.next=8;break}return J.a.showLoader=!0,e.next=4,new p({ids:Object.keys(Y.selectedRecords.ids),status:this.params.batchAction||""}).updateCommissionStatus();case 4:J.a.showLoader=!1,h.a.show({status:"success",message:_x("Commission status updated successfully","success message after updating commission status","affiliate-for-woocommerce")}),e.next=9;break;case 8:h.a.show({status:"warning",message:_x("Please select a referral","warning message when no referral is selected for commission status update","affiliate-for-woocommerce")});case 9:case"end":return e.stop()}}),e,this)})),s=function(){var e=this,t=arguments;return new Promise((function(a,i){var s=r.apply(e,t);function o(e){ae(s,a,i,o,n,"next",e)}function n(e){ae(s,a,i,o,n,"throw",e)}o(void 0)}))},function(){return s.apply(this,arguments)})},{key:"getCommissionStatusActions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t={paid:_x("Mark as Paid","action name to mark commission as paid","affiliate-for-woocommerce"),unpaid:_x("Mark as Unpaid","action name to mark commission as unpaid","affiliate-for-woocommerce"),rejected:_x("Mark as Rejected","action name to mark commission as rejected","affiliate-for-woocommerce")};return e?e in t?t[e]:"":t}},{key:"showPlaceholder",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:4;return m("[",null,m("div",{class:"afw-placeholder m-2 h-8"}),m("div",{class:"flex"},parseInt(e)>0?ee(Array(parseInt(e))).map((function(){return m("div",{class:"afw-placeholder m-2 h-8 w-1/4"})})):""),m("div",{class:"flex"},parseInt(e)>0?ee(Array(parseInt(e))).map((function(){return m("div",{class:"afw-placeholder m-2 h-8 w-1/4"})})):""))}},{key:"showCommissionActionsPlaceholder",value:function(){return m("div",{class:"afw-placeholder m-2 mb-4 h-8"})}},{key:"commissionActions",value:function(){var e=this;return L.details.referrals&&L.details.referrals.length>0?m("[",null,m(Z,{commission:Y.selectedRecords.unpaidCommission,name:L.details.name||""}),m("div",{class:"flex items-center pb-3"},m("div",{class:"ml-3"},m("div",{class:(Y.selectedRecords.unpaidCommission>0&&!Y.selectedRecords.IsMultiCurrencyDetected?"":"opacity-50 cursor-not-allowed ")+"cursor-pointer",onclick:function(){return Z.flags.show=Y.selectedRecords.unpaidCommission>0&&!Y.selectedRecords.IsMultiCurrencyDetected}},m("a",{class:"px-2 text-sm font-medium leading-6 text-indigo-600 hover:text-indigo-800"},Y.selectedRecords.IsMultiCurrencyDetected?_x("Payout is not allowed for multiple currency","multi currency not allowed message","affiliate-for-woocommerce"):_x("Send Payout:","Commissions payout title","affiliate-for-woocommerce")+" "+(Y.selectedRecords.payoutCurrencySymbol||afwcDashboardParams.currencySymbol||"")+(Y.selectedRecords.IsMultiCurrencyDetected?0:u.a.formatNumber(Y.selectedRecords.unpaidCommission||0))))),m("h4",{class:"flex-1 text-lg text-gray-700"}),m("span",{class:"text-gray-400 mr-4 text-sm"},sprintf(_nx("%s record","%s records",Object.keys(Y.selectedRecords.ids).length||0,"number of selected records","affiliate-for-woocommerce"),Object.keys(Y.selectedRecords.ids).length)||0,Y.selectedRecords.IsMultiCurrencyDetected?"":", "+(Y.selectedRecords.payoutCurrencySymbol||afwcDashboardParams.currencySymbol||"")+(Y.selectedRecords.commission||0)+" "+_x("commission","text for commission amount","affiliate-for-woocommerce")),m("select",{"aria-label":_x("Batch Actions","commission batch action","affiliate-for-woocommerce"),class:"form-select h-full py-2 pl-2 bg-transparent text-gray-500 sm:text-sm sm:leading-5 disabled:opacity-75",onchange:function(t){return e.params.batchAction=t.target.value||""}},Object.keys(this.getCommissionStatusActions()).map((function(t){return m("option",{value:t,selected:t===e.params.batchAction?"selected":""},e.getCommissionStatusActions(t)||"")}))),m("div",{class:"rounded-md shadow-sm ml-4"},m("button",{type:"submit",class:(Object.keys(Y.selectedRecords.ids).length>0?"":"opacity-50 cursor-not-allowed ")+"flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-gray-600 hover:bg-gray-500 focus:outline-none focus:border-gray-700 focus:shadow-outline-gray active:bg-gray-700 transition duration-150 ease-in-out disabled:opacity-75",onclick:function(){return e.updateCommissionStatus()}},_x("Update","update button title for commission status","affiliate-for-woocommerce"))))):""}},{key:"view",value:function(e){var t=this;return this.params.id!=e.attrs.id&&(Y.initialize(),p.flags.loadMore=!0),p.flags.moreReferralLoaded&&Y.selectedRecords.selectAll&&Y.handleRowSelection(L.details.referrals,!0),p.flags.clearSelections&&(Y.initialize(),p.flags.clearSelections=!1),v.flags.PayoutProcessed&&Y.initialize(),m("section",{class:"my-5 overflow-x-auto"},L.isLoading("referrals")?this.showCommissionActionsPlaceholder():this.commissionActions(),m("section",null,L.isLoading("referrals")?this.showPlaceholder():m(Y,null)),p.flags.loadMore&&L.details.referrals.length>0&&0==L.details.referrals.length%parseInt(u.a.getAFWParams("dashboard_data_batch_limit")||0)?m("div",{class:"my-3"},m("div",{class:"pb-2 text-right border-b border-gray-200 text-center"},m("a",{class:"py-2 px-4 text-sm font-medium text-indigo-400 uppercase cursor-pointer",onclick:function(){return t.loadReferrals()}},_x("Load More","load more text for referrals","affiliate-for-woocommerce")))):"")}}])&&ie(t.prototype,a),i&&ie(t,i),e}();function se(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var oe=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,a,i;return t=e,(a=[{key:"view",value:function(){return L.details.payouts&&Object.entries(L.details.payouts).length>0?m("table",{class:"min-w-full"},m("thead",null,m("tr",null,m("th",{class:"px-6 py-3 border-b border-gray-200 bg-gray-50 text-left text-xs leading-4 font-medium text-gray-500 uppercase tracking-wider"},__("Date","affiliate-for-woocommerce")),m("th",{class:"px-6 py-3 border-b border-gray-200 bg-gray-50 text-right text-xs leading-4 font-medium text-gray-500 uppercase tracking-wider"},__("Amount","affiliate-for-woocommerce")),m("th",{class:"px-6 py-3 border-b border-gray-200 bg-gray-50 text-left text-xs leading-4 font-medium text-gray-500 uppercase tracking-wider"},__("Method","affiliate-for-woocommerce")),m("th",{class:"px-6 py-3 border-b border-gray-200 bg-gray-50 text-left text-xs leading-4 font-medium text-gray-500 uppercase text-right"},__("Notes","affiliate-for-woocommerce")))),m("tbody",{class:"bg-white"},L.details.payouts.map((function(e){return m("tr",null,m("td",{class:"px-6 py-3 whitespace-no-wrap border-b border-gray-200 text-sm leading-5 text-gray-500"},m("time",{datetime:e.datetime||""},e.datetime||"")),m("td",{class:"px-6 py-3 whitespace-no-wrap border-b border-gray-200 text-sm leading-5 font-medium text-gray-900"},m("div",{class:"flex items-center flex-row-reverse"},m("span",{class:"numeric text-gray-600"},e.currency||""," ",u.a.formatNumber(e.amount||0)),m("span",{class:(e.hasOwnProperty("referral_count")&&e.hasOwnProperty("from_date")&&e.hasOwnProperty("to_date")?"visible ":"invisible ")+"hidden xl:inline mx-3 text-gray-400 text-xs"},"for ",sprintf(_nx("%s referral","%s referrals",parseInt(e.referral_count||0),"number of referrals","affiliate-for-woocommerce"),e.referral_count||"-")," from ",e.from_date||"-"," to ",e.to_date||"-"))),m("td",{class:"px-6 py-3 whitespace-no-wrap border-b border-gray-200 text-sm leading-5 text-gray-500"},e.method&&u.a.getAFWParams("payoutMethods")?u.a.getAFWParams("payoutMethods")[e.method]||e.method:""),m("td",{class:"px-6 py-3 whitespace-no-wrap border-b border-gray-200 text-xs leading-5 text-gray-500 text-right"},e.payout_notes||""))})))):m("p",{class:"py-8 text-sm text-center text-gray-500"},_x("No payout details found","empty payout message","affiliate-for-woocommerce"))}}])&&se(t.prototype,a),i&&se(t,i),e}();function ne(e){return function(e){if(Array.isArray(e))return le(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return le(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return le(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function le(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,i=new Array(t);a<t;a++)i[a]=e[a];return i}function ce(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var me=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.params={id:t.attrs.id||0,startDate:t.attrs.startDate||"",endDate:t.attrs.endDate||"",currentPage:0}}var t,a,i;return t=e,(a=[{key:"oninit",value:function(){this.loadPayouts()}},{key:"loadPayouts",value:function(){this.params.currentPage++,new v(this.params).fetch()}},{key:"onupdate",value:function(e){this.params.id!=e.attrs.id&&(this.params.id=e.attrs.id,this.params.currentPage=1)}},{key:"showPlaceholder",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:4;return m("[",null,m("div",{class:"afw-placeholder m-2 h-8"}),m("div",{class:"flex"},parseInt(e)>0?ne(Array(parseInt(e))).map((function(){return m("div",{class:"afw-placeholder m-2 h-8 w-1/4"})})):""),m("div",{class:"flex"},parseInt(e)>0?ne(Array(parseInt(e))).map((function(){return m("div",{class:"afw-placeholder m-2 h-8 w-1/4"})})):""))}},{key:"view",value:function(e){var t=this;return this.params.id!=e.attrs.id&&(v.flags.loadMore=!0),this.commisions=L.details.stats.allTime.earned_commissions||"0.00",this.paidCommisions=L.details.stats.allTime.paid_commissions||"0.00",this.unpaidCommisions=L.details.stats.allTime.unpaid_commissions||"0.00",m("section",{class:"my-5 overflow-x-auto"},m("section",{class:"flex items-center justify-between text-sm text-gray-800"},m("div",{class:"flex-1 flex items-center justify-between"},m("div",{class:"mr-3"},m("div",{class:"text-2xl leading-none font-medium flex items-center"},m("span",{class:"text-sm font-normal text-gray-600 mr-1"},afwcDashboardParams.currencySymbol)," ",this.commisions.split(".")[0]," ",m("span",{class:"text-sm"},".",this.commisions.split(".")[1])),m("div",{class:"mt-1 leading-6 text-gray-400"},__("Commission (All Time)","affiliate-for-woocommerce"))),m("div",{class:"ml-3"},m("div",{class:"text-2xl leading-none font-medium flex items-center"},m("span",{class:"text-sm font-normal text-gray-600 mr-1"},afwcDashboardParams.currencySymbol)," ",this.paidCommisions.split(".")[0]," ",m("span",{class:"text-sm"},".",this.paidCommisions.split(".")[1])),m("div",{class:"mt-1 leading-6 text-gray-400"},__("Paid (All Time)","affiliate-for-woocommerce"))),m("div",{class:"ml-3"},m("div",{class:"text-2xl leading-none font-medium flex items-center"},m("span",{class:"text-sm font-normal text-gray-600 mr-1"},afwcDashboardParams.currencySymbol)," ",this.unpaidCommisions.split(".")[0]," ",m("span",{class:"text-sm"},".",this.unpaidCommisions.split(".")[1])),m("div",{class:"mt-1 leading-6 text-gray-400"},__("Unpaid (All Time)","affiliate-for-woocommerce"))))),m("section",{class:"my-6"},L.isLoading("payouts")?this.showPlaceholder():m(oe,null),v.flags.loadMore&&L.details.payouts.length>0&&0==L.details.payouts.length%parseInt(u.a.getAFWParams("dashboard_data_batch_limit")||0)?m("div",{class:"my-3"},m("div",{class:"pb-2 text-right border-b border-gray-200 text-center"},m("a",{class:"py-2 px-4 text-sm font-medium text-indigo-400 uppercase cursor-pointer",onclick:function(){t.loadPayouts()}},__("Load More","affiliate-for-woocommerce")))):""))}}])&&ce(t.prototype,a),i&&ce(t,i),e}();function de(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ue(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var fe=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};de(this,e),this.params={id:t.attrs.id||0},this.nodeCss="inline-block p-2 text-sm border-solid border-gray-200 text-gray-500 w-40 border hover:text-gray-900 rounded-lg bg-warning-light",this.placeholderNodeCss="inline-block text-sm border-solid border-gray-200 text-gray-500 w-40 border rounded-lg afw-placeholder m-2 h-8",this.multiTierWrapperCss="multi-tier-tree flex items-center justify-center"}var t,a,i;return t=e,(a=[{key:"oninit",value:function(){new I(this.params).fetch()}},{key:"showPlaceholder",value:function(){return m("div",{class:this.multiTierWrapperCss||""},this.buildList([{id:1,children:[{id:2,children:[]},{id:3,children:[]},{id:4,children:[]}]}],!0,!0))}},{key:"buildList",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return m("ul",{class:"py-5 relative transition-all"},t.map((function(t){return m("li",{class:"float-left pt-5 pb-0 text-center list-none relative px-5 transition-all"},m("span",{class:i?e.placeholderNodeCss:a?e.nodeCss:""},t.name||""),t.children&&t.children.length>0?e.buildList(t.children,a,i):"")})))}},{key:"view",value:function(){return m("section",{class:"my-5 overflow-x-auto"},L.isLoading("multi-tier")?this.showPlaceholder():L.details.multiTierChain&&Object.entries(L.details.multiTierChain).length>0?m("div",{class:this.multiTierWrapperCss||""},this.buildList(L.details.multiTierChain,!0)):m("p",{class:"py-8 text-sm text-center text-gray-500"},_x("No children found. View/set parent affiliate from","empty chain message","affiliate-for-woocommerce")," ",m("a",{href:L.details.editURL||"",target:"_blank",class:"text-indigo-600 hover:text-indigo-900 focus:outline-none focus:underline numeric"},_x("affiliate's user profile","a href for affiliate admin user profile","affiliate-for-woocommerce")),"."))}}])&&ue(t.prototype,a),i&&ue(t,i),e}();function pe(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var he=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.params={id:t.attrs.id||0,startDate:t.attrs.startDate||"",endDate:t.attrs.endDate||"",activeTab:B.activeTab||"referrals"}}var t,a,i;return t=e,(a=[{key:"refreshModel",value:function(e){var t=this.params.id,a=this.params.startDate,i=this.params.endDate;this.params=Object.assign(this.params,e.attrs),t==e.attrs.id&&a==e.attrs.startDate&&i==e.attrs.endDate||(this.model=new L(this.params).reload(B.activeTab||"referrals")),this.params.activeTab=B.activeTab||"referrals"}},{key:"oncreate",value:function(){this.model=new L(this.params).fetch()}},{key:"view",value:function(e){return this.refreshModel(e),m("section",{class:(L.details.pending?"border-t-4 border-red-400 ":"")+"px-6 py-6 sm:w-3/4 rounded-lg bg-white shadow"},L.details.pending?m("article",{class:"h-3/6 w-full"},m(F,null),m("article",{class:"h-3/6 w-full sm:flex sm:items-center sm:justify-center"},m("a",{href:L.details.editURL,target:"_blank",class:"inline-flex justify-center py-4 px-6 border border-transparent text-lg leading-5 font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-500 focus:outline-none focus:border-indigo-700 focus:shadow-outline-indigo active:bg-indigo-700 transition duration-150 ease-in-out"},__("Review & Approve Affiliate","affiliate-for-woocommerce")))):m("article",{class:"w-full"},m(F,null),m(N,null),m(B,null),"referrals"===this.params.activeTab?m(re,{id:this.params.id,startDate:this.params.startDate,endDate:this.params.endDate}):"","payouts"===this.params.activeTab?m(me,{id:this.params.id,startDate:this.params.startDate,endDate:this.params.endDate}):"","top-products"===this.params.activeTab?m(U,{id:this.params.id,startDate:this.params.startDate,endDate:this.params.endDate}):"","profile"===this.params.activeTab?m(S,{id:this.params.id}):"","multi-tier"===this.params.activeTab?m(fe,{id:this.params.id}):""))}}])&&pe(t.prototype,a),i&&pe(t,i),e}();function ge(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function ye(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var ve=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.type="standard"}var t,a,i;return t=e,(a=[{key:"showOptions",value:function(e){var t=document.getElementById("afwc-export-option");"none"===t.style.display?t.style.display="block":t.style.display="none"}},{key:"exportAffiliates",value:function(e){this.type=e,r.a.exportAffiliates(this.type),document.getElementById("afwc-export-option").style.display="none"}},{key:"view",value:function(e){var t=this;return m("div",{class:"relative"},m("button",{type:"button",id:"afwc-export-btn",onclick:function(e){t.showOptions(e)},class:"w-2/3 rounded-md shadow-sm cursor-pointer relative w-3/5 rounded-md border bg-white pl-3 pr-10 py-2 text-left focus:outline-none focus:shadow-outline-blue focus:border-blue-300 transition ease-in-out duration-150 sm:text-sm sm:leading-5"},m("div",{class:"flex items-center space-x-3"},m("span",{class:"font-normal flex truncate"},m("span",{class:"flex items-center pl-2 mr-2 pointer-events-none"},m("svg",{class:"h-5 w-5 text-gray-400",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},m("path",{"fill-rule":"evenodd",d:"M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z","clip-rule":"evenodd"}))),__("Export","affiliate-for-woocommerce"))),m("span",{class:"absolute inset-y-0 right-0 flex items-center pr-2 pointer-events-none"},m("svg",{class:"h-5 w-5 text-gray-400",viewBox:"0 0 20 20",fill:"none",stroke:"currentColor"},m("path",{d:"M7 7l3-3 3 3m0 6l-3 3-3-3","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"})))),m("div",{id:"afwc-export-option",class:"absolute mt-1 w-3/5 rounded-md bg-white shadow-lg",style:"display: none;"},m("ul",{tabindex:"-1",role:"listbox",class:"max-h-56 rounded-md py-1 text-base leading-6 shadow-xs overflow-auto focus:outline-none sm:text-sm sm:leading-5"},m("li",ge({id:"listbox-item-0","data-type":"standard",onclick:function(e){t.exportAffiliates(e.target.getAttribute("data-type"))},class:"{ 'text-white bg-indigo-600': selected === 0, 'text-gray-900': !(selected === 0) }"},"class","cursor-pointer select-none relative py-2 pl-3 pr-9 text-gray-900"),__("Standard CSV","affiliate-for-woocommerce")),m("li",ge({id:"listbox-item-0","data-type":"mass_payment",onclick:function(e){t.exportAffiliates(e.target.getAttribute("data-type"))},class:"{ 'text-white bg-indigo-600': selected === 0, 'text-gray-900': !(selected === 0) }"},"class","cursor-pointer select-none relative py-2 pl-3 pr-9 text-gray-900"),__("Mass Payout CSV","affiliate-for-woocommerce")))))}}])&&ye(t.prototype,a),i&&ye(t,i),e}();function we(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function be(e,t,a){return t&&we(e.prototype,t),a&&we(e,a),e}var xe=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.initialize(t.attrs)}return be(e,[{key:"initialize",value:function(e){this.startDate=e.startDate||"",this.endDate=e.endDate||""}}]),be(e,[{key:"view",value:function(e){return this.initialize(e.attrs),m("main",{class:"max-w-7xl mx-auto my-8 py-6 sm:px-3 xl:px-8 sm:flex sm:items-top"},m("section",{class:"sm:w-1/4"},m(l,null),m(ve,null),m(d,null)),m(he,{id:r.a.data.currentAffiliateID,startDate:this.startDate,endDate:this.endDate}))}}]),e}(),_e=a(8),ke=a(11);function Pe(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Ce(e,t,a){return t&&Pe(e.prototype,t),a&&Pe(e,a),e}var De=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.initialize(t.attrs)}return Ce(e,[{key:"initialize",value:function(e){this.urlParams={},this.model=new r.a(this.urlParams)}}]),Ce(e,[{key:"onupdate",value:function(e){this.urlParams!=e.attrs&&Object.keys(e.attrs).length&&this.initialize(e.attrs);var t=document.getElementById("afwc-search-panel"),a=document.getElementById("afwc-export-option"),i=document.getElementById("afwc-smart-dates-dropdown-list");document.onclick=function(e){t&&"afwc-search-field"!=e.target.id&&!e.target.closest("#afwc-search-panel")&&t.classList.add("hidden"),!a||"afwc-export-btn"==e.target.id||e.target.closest("#afwc-export-option")||e.target.closest("#afwc-export-btn")||"none"!==a.style.display&&(a.style.display="none"),i&&"afwc-smart-dates-dropdown-icon"!=e.target.id&&"afwc-smart-dates-dropdown-list"!=e.target.id&&!e.target.closest("li")&&i.classList.add("hidden")}}},{key:"view",value:function(){return m("[",null,m(i.a,{startDate:r.a.data.start_date,endDate:r.a.data.end_date}),Object.keys(r.a.data.kpi).length>0&&r.a.data.affiliates.length>0?m("[",null,m(o,null),m(ke.a,{dashboardNotice:!0}),m(xe,{startDate:r.a.data.start_date,endDate:r.a.data.end_date})):J.a.showLoader?"":m("header",{class:"bg-white shadow"},m("div",{class:"max-w-7xl mx-auto py-40 sm:px-3 xl:px-8 text-gray-500"},m("p",{class:"text-xl font-medium leading-8 text-center"},__("No affiliates yet.","affiliate-for-woocommerce")),m("div",{class:"text-lg mx-auto leading-8 max-w-sm mt-6 space-y-4"},m("p",null,__('Go to "Settings" and select some user roles to automatically make them affiliates.',"affiliate-for-woocommerce")),m("p",null,__("Or edit your affiliate registration form (link available in Settings) and link it from your site.","affiliate-for-woocommerce")),m("p",null,__("Or go to an individual user's profile in WordPress and make them an affiliate.","affiliate-for-woocommerce"))))),h.a.flags.showNotification?m(_e.a,null):null)}}]),e}()},function(e,t,a){"use strict";a.d(t,"a",(function(){return D}));var i=a(10),r=a(6),s=a(2),o=a(3),n=a(0);function l(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var c=function(){function e(t){var a=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.ruleRow=t.attrs.ruleRow,this.type=t.attrs.ruleRow.type,this.index=t.attrs.index,this.key=t.attrs.key,this.operator=t.attrs.ruleRow.operator,this.value=t.attrs.ruleRow.value||[],this.callbackToParent=t.attrs.callbackToParent,this.possibleOperators=s.a.allRules[this.type].possibleOperators,this.isOnlyOne=t.attrs.isOnlyOne;var i=this.possibleOperators.filter((function(e){return a.operator==e.op}));this._operator=i.length>0?i[0]:{},this.select_id=Math.random().toString(36).substring(7),this.meta=t.attrs.ruleRow.meta||{ruleTitles:{}}}var t,a,i;return t=e,(a=[{key:"oncreate",value:function(e){this.intializeSelectwoo()}},{key:"onupdate",value:function(e){this.index=e.attrs.index}},{key:"getDetails",value:function(){return{type:this.type,operator:this.operator,value:this.value,key:this.key,meta:this.meta}}},{key:"refreshValues",value:function(e){this.value="",this.type=e,this.possibleOperators=s.a.allRules[this.type].possibleOperators,this.intializeSelectwoo(),jQuery("#"+this.key).val(this.value).trigger("change"),this.informParent()}},{key:"getInputPlaceholder",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t="";if(""===e)return t;var a=n.a.getAFWParams("plan_dashboard_data")||{},i=a.plan_rule_data;for(var r in i)for(var s in i[r])e===s&&(t=i[r][s].placeholder||"");return t}},{key:"intializeSelectwoo",value:function(){var e=this,t=this.type||"",a={placeholder:this.getInputPlaceholder(t)||_x("Search for a value","placeholder","affiliate-for-woocommerce"),dropdownParent:jQuery("#afwc-commission-details"),minimumInputLength:"affiliate_tag"===t?1:3,escapeMarkup:function(e){return e},ajax:{url:ajaxurl,dataType:"json",delay:1e3,data:function(e){return{term:e.term||"",type:t||"",action:"afwc_json_search_rule_values",security:n.a.getAFWParams("security.commissions.searchPlan")||""}},processResults:function(e){var t=[];return e&&jQuery.each(e,(function(e,a){t.push({id:e,text:a})})),{results:t}},cache:!0}},i=jQuery("#"+this.key);i.selectWoo(a),i.on("change",(function(t){e.value=i.val(),e.meta.ruleTitles={},i.selectWoo("data").map((function(t){var a=t.id,i=t.text;a&&(e.meta.ruleTitles[a]=i)})),e.informParent()}))}},{key:"renderFieldSelect",value:function(e){var t=this,a=(n.a.getAFWParams("plan_dashboard_data")||{}).plan_rule_data,i=this.type||"";return m("select",{class:"afwc-rule-select py-1 pl-3 pr-8 text-sm font-medium leading-5 capitalize text-gray-700 bg-transparent form-select",onchange:function(e){t.refreshValues(e.target.value)}},Object.keys(a).map((function(e){return m("optgroup",{label:a[e]._meta&&a[e]._meta.title||e},Object.keys(a[e]).map((function(t){return"_meta"!==t?m("option",{value:t,selected:i===t?"selected":""},a[e][t].title||t):""})))})))}},{key:"renderOperatorSelect",value:function(e){var t=this,a=this.operator||"";return m("select",{class:"py-1 pl-3 pr-8 text-sm leading-5 text-gray-500 bg-transparent form-select",onchange:function(e){t.listenOpChange(e)}},this.possibleOperators.map((function(e){return m("option",{value:e.op,selected:a===e.op?"selected":""},e.label)})))}},{key:"listenOpChange",value:function(e){var t=this;this.operator=e.target.value;var a=this.possibleOperators.filter((function(e){return t.operator==e.op}));this._operator=a.length>0?a[0]:{},this.informParent()}},{key:"informParent",value:function(){this.callbackToParent(this.getDetails(),"update",this.index)}},{key:"deleteRule",value:function(){this.callbackToParent(null,"delete",this.index)}},{key:"renderValues",value:function(){var e=this,t=void 0!==this.meta.ruleTitles&&this.meta.ruleTitles.length>0?this.meta.ruleTitles:s.a.idNameMaps[this.type]||{},a=this._operator.type||"single";return m("div",{class:"flex-1 relative"},"single"===a?m("input",{class:"w-full max-w-fullpy-1 text-sm leading-5 text-gray-700 form-input",value:this.value,oninput:function(t){e.value=t.target.value,e.informParent()}}):m("select",{id:this.key,class:"afwc-rule-value-select max-w-full py-1 pl-3 pr-8 text-sm leading-5 text-gray-500 bg-transparent form-select w-full block","data-action":"afwc_json_search_rule_values",multiple:"multiple"},this.value.length>0?this.value.map((function(e){return t[e]?m("option",{value:e,selected:"selected"},t[e]):""})):""))}},{key:"addConditionRow",value:function(e){var t=this;return m("div",{class:"flex items-center gap-2 w-full"},this.renderFieldSelect(e),this.renderOperatorSelect(e),this.renderValues(e),m("div",{class:"flex-shrink-0"},m("button",{type:"button",onclick:function(){t.deleteRule()},class:(this.isOnlyOne?"invisible":"")+" flex items-center justify-center p-1 text-xs leading-5 text-gray-300 transition duration-150 ease-in-out border border-transparent rounded-md hover:text-red-600 hover:border-red-600 focus:outline-none focus:shadow-outline-red focus:border-red-600"},m("svg",{fill:"none",stroke:"currentColor",class:"w-5 h-5"},m("svg",{id:"icon-remove-condition","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24"},m("path",{d:"M15 12H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"}))))))}},{key:"view",value:function(e){return this.isOnlyOne=e.attrs.isOnlyOne,m("[",null,this.addConditionRow(this.ruleRow))}}])&&l(t.prototype,a),i&&l(t,i),e}();function d(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var u=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.callbackToParent=t.attrs.callbackToParent,this.index=t.attrs.index,this.rules=t.attrs.ruleGroup.rules,this.key=t.attrs.key,this.rules=this.rules.map((function(e){return e.key=Math.random().toString(36).slice(7),e})),this.ruleGroupCondition=t.attrs.ruleGroup.condition}var t,a,i;return t=e,(a=[{key:"updateData",value:function(e,t,a){"update"==t?this.rules[a]=e:"delete"==t&&this.rules.splice(a,1),this.informParent()}},{key:"onupdate",value:function(e){this.index=e.attrs.index}},{key:"addNewRule",value:function(){var e=JSON.parse(JSON.stringify(s.a.ruleRow));e.key=Math.random().toString(36).slice(7),this.rules.push(e),this.informParent()}},{key:"getDetails",value:function(){return{condition:this.ruleGroupCondition,rules:this.rules,key:this.key}}},{key:"informParent",value:function(){this.callbackToParent(this.getDetails(),"update",this.index)}},{key:"addNewRuleGroup",value:function(){this.callbackToParent(null,"add",null)}},{key:"deleteRuleGroup",value:function(){this.callbackToParent(null,"delete",this.index)}},{key:"view",value:function(e){var t=this;return m("div",{class:"px-4 pt-3 pb-2 mb-6 space-y-3 bg-gray-100 border-gray-200 rounded-md"},m("div",{class:"flex items-center gap-2 text-xs text-gray-400"}," ",m("span",null,__('This group is a "pass" when',"affiliate-for-woocommerce")),m("div",{class:"flex items-center"},m("select",{"aria-label":"match-type",class:"h-full py-0.5 pl-3 pr-8 font-medium text-gray-700 bg-transparent form-select text-xs",onchange:function(e){t.ruleGroupCondition=e.target.value,t.informParent()}},m("option",{value:"AND",selected:"AND"===this.ruleGroupCondition?"selected":""},__("all","affiliate-for-woocommerce")),m("option",{value:"OR",selected:"OR"===this.ruleGroupCondition?"selected":""},__("at least one","affiliate-for-woocommerce"))))," ",m("span",null," ",__("of the following conditions is true.","affiliate-for-woocommerce")," ")," "),this.rules.map((function(e,a){return m(c,{key:e.key,isOnlyOne:1===t.rules.length,index:a,callbackToParent:t.updateData.bind(t),ruleRow:e})})),m("div",{class:"flex items-center gap-6 pt-1"},m("button",{type:"button",class:"flex items-center gap-1 justify-center px-1 py-0.5 text-xs leading-5 text-gray-400 transition duration-150 ease-in-out border border-transparent rounded-md hover:text-green-600 hover:border-green-600 focus:outline-none focus:shadow-outline-green focus:border-green-600",onclick:function(){t.addNewRule()}},m("svg",{fill:"none",stroke:"currentColor",class:"w-5 h-5"},m("svg",{id:"icon-add-condition","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24"},m("path",{d:"M12 9v3m0 0v3m0-3h3m-3 0H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"})))," ",__("Add a condition","affiliate-for-woocommerce")," ")," ",m("span",{class:"flex-1"}),m("button",{type:"button",class:"flex items-center gap-1 justify-center px-1 py-0.5 text-xs leading-5 text-gray-400 transition duration-150 ease-in-out border border-transparent rounded-md hover:text-indigo-600 hover:border-indigo-600 focus:outline-none focus:shadow-outline-indigo focus:border-indigo-600",onclick:function(){t.addNewRuleGroup()}},m("svg",{fill:"none",stroke:"currentColor",class:"w-5 h-5"},m("svg",{id:"icon-add-group","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24"},m("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 13h6m-3-3v6m-9 1V7a2 2 0 012-2h6l2 2h6a2 2 0 012 2v8a2 2 0 01-2 2H5a2 2 0 01-2-2z"})))," ",__("Add another group","affiliate-for-woocommerce")," "),e.attrs.isOnlyOne?"":m("button",{type:"button",class:"flex items-center gap-1 justify-center px-1 py-0.5 text-xs leading-5 text-gray-400 transition duration-150 ease-in-out border border-transparent rounded-md hover:text-red-600 hover:border-red-600 focus:outline-none focus:shadow-outline-red focus:border-red-600",onclick:function(){t.deleteRuleGroup()}},m("svg",{fill:"none",stroke:"currentColor",class:"w-5 h-5"},m("svg",{id:"icon-remove-group","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24"},m("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 13h6M3 17V7a2 2 0 012-2h6l2 2h6a2 2 0 012 2v8a2 2 0 01-2 2H5a2 2 0 01-2-2z"}))),__("Remove this group","affiliate-for-woocommerce"))))}}])&&d(t.prototype,a),i&&d(t,i),e}();function f(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var p=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,a,i;return t=e,(a=[{key:"renderDistribution",value:function(){for(var e=[],t=0;t<=parseInt(s.a.details.no_of_tiers||0)-2;t++)e.push(s.a.details.distribution[t]||"");return s.a.details.distribution=e,m("[",null,Object.keys(s.a.details.distribution).map((function(e){return m("input",{onchange:function(t){s.a.details.distribution[e]=t.target.value||""},class:"w-auto text-base font-small leading-4 text-gray-700 form-input mr-3 mb-2",type:"number",value:s.a.details.distribution[e]})})))}},{key:"view",value:function(){var e=this;return m("div",null,m("div",{class:"mb-3 text-gray-700 uppercase text-xs"},m("label",null,__("No of Tiers","affiliate-for-woocommerce")),m("input",{type:"number",min:"1",max:"10",oninput:function(t){s.a.details.no_of_tiers=t.target.value||"",e.renderDistribution()},id:"no_of_tiers",class:"w-1/2 text-xl leading-7 text-gray-700 form-input ml-3",value:s.a.details.no_of_tiers||""}),m("span",{class:"text-gray-500 ml-2"},__("change this to add/remove distribution tiers","affiliate-for-woocommerce"))),parseInt(s.a.details.no_of_tiers||0)>1?m("[",null,m("div",{class:"mb-3 text-gray-700 uppercase text-xs"},__("Distribution","affiliate-for-woocommerce")),this.renderDistribution()):" ")}}])&&f(t.prototype,a),i&&f(t,i),e}();function h(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var g=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.planCondition=s.a.details.rules.condition?s.a.details.rules.condition:"AND",this.ruleGroups=s.a.details.rules.rules?s.a.details.rules.rules:[s.a.ruleGroup],this.commissionId=s.a.details.commissionId,this.name=s.a.details.name,this.type=s.a.details.type||"Percentage",this.amount=s.a.details.amount,this.status=s.a.details.status||"Active",this.apply_to=s.a.details.apply_to||"all",this.action_for_remaining=s.a.details.action_for_remaining||"continue",this.ruleGroups=this.ruleGroups.map((function(e){return e.key=Math.random().toString(36).slice(7),e})),this.getStatuses=n.a.getCommissionPlansStatus}var t,a,i;return t=e,(a=[{key:"addNewRuleGroup",value:function(){var e=JSON.parse(JSON.stringify(s.a.ruleGroup));e.key=Math.random().toString(36).slice(7),this.ruleGroups.push(e)}},{key:"updateData",value:function(e,t,a){"update"==t?this.ruleGroups[a]=e:"add"==t?this.addNewRuleGroup():"delete"==t&&this.ruleGroups.splice(a,1)}},{key:"checkEmptyRule",value:function(){return this.ruleGroups.filter((function(e){return e.rules.filter((function(e){return void 0===e.value||0===e.value.length})).length>0})).length>0}},{key:"updateCommission",value:function(){var e=this.getDetails();return e.name?this.checkEmptyRule()&&this.commissionId!==afwcDashboardParams.default_plan_id?o.a.show({status:"warning",message:_x("Empty rule values are not allowed","error message when empty rule values are submitted","affiliate-for-woocommerce")}):e.amount?"Percentage"===e.type&&parseFloat(e.amount)>100?o.a.show({status:"warning",message:_x("Add proper value of amount","error message for incorrect value of amount","affiliate-for-woocommerce")}):(e.rules.rules=e.rules.rules.map((function(e){return e.rules=e.rules.map((function(e){return delete e.key,e})),delete e.key,e})),s.a.details=e,void s.a.saveCommission()):o.a.show({status:"warning",message:_x("Empty amount value is not allowed","error message when an empty value is not allowed","affiliate-for-woocommerce")}):o.a.show({status:"warning",message:_x("Please add commission title","error message when commission title is not provided","affiliate-for-woocommerce")})}},{key:"getDetails",value:function(){var e={};return e.rules={condition:this.planCondition,rules:this.ruleGroups},e.name=this.name,e.amount=this.amount,e.type=this.type,e.status=this.status,e.apply_to=this.apply_to,e.action_for_remaining=this.action_for_remaining,e.no_of_tiers=s.a.details.no_of_tiers,e.distribution=s.a.details.distribution,e.commissionId=this.commissionId,e}},{key:"view",value:function(e){var t=this;return m("aside",{id:"afwc-commission-details",style:"z-index: 100099;",class:"fixed inset-x-0 bottom-0 lg:inset-0 lg:flex lg:items-center lg:justify-end"},m("div",{class:"fixed inset-0 transition-opacity"},m("div",{class:"absolute inset-0 bg-gray-500 opacity-75"})),m("section",{class:"w-full h-full max-w-6xl max-h-full mt-12 overflow-scroll transition-all transform bg-gray-50 lg:ml-1/6 lg:mt-0"},m("div",{class:"sticky top-0 z-10 w-full bg-gray-100"},m("nav",{class:"px-4 py-2 xl:px-4 lg:py-2"},m("div",{class:"flex items-center justify-between"},m("div",{class:"flex items-center flex-1 gap-2"},m("label",{for:"name",class:"text-sm font-medium text-gray-700 uppercase"},__("Name","affiliate-for-woocommerce")),m("input",{id:"name",class:"w-full text-xl font-medium leading-7 text-gray-700 form-input",placeholder:_x("Enter a name for this commission plan","placeholder","affiliate-for-woocommerce"),value:this.name||"",oninput:function(e){t.name=e.target.value}})),m("div",{class:"flex items-center mt-2 text-right lg:mt-0"},m("div",{class:"flex items-center gap-4 ml-4 lg:ml-2"},this.getStatuses()?m("[",null,m("label",{for:"commission-status",class:"hidden sr-only"},__("Status","affiliate-for-woocommerce")),m("select",{id:"commission-status",disabled:this.commissionId===afwcDashboardParams.default_plan_id?"disabled":"",class:"form-select pl-3 pr-10 py-2 text-base leading-6 border-gray-100 focus:outline-none focus:shadow-outline-blue  focus:border-blue-100 sm:text-sm sm:leading-5 text-gray-500","aria-label":_x("Commission status","Commission status dropdown","affiliate-for-woocommerce"),onchange:function(e){t.status=e.target.value}},Object.keys(this.getStatuses()).map((function(e){return m("option",{value:e,selected:t.status==e?"selected":""},t.getStatuses(e)||"")})))):"",m("span",{class:"rounded-md"},m("button",{onclick:function(){return t.updateCommission()},type:"button",class:"inline-flex justify-center w-full px-5 py-1 text-sm font-medium leading-5 text-white transition duration-150 ease-in-out bg-indigo-600 border border-transparent rounded-md hover:bg-indigo-500 focus:outline-none focus:shadow-outline-indigo"},__("Save","affiliate-for-woocommerce"))),this.commissionId===afwcDashboardParams.default_plan_id?"":m("button",{onclick:function(){confirm(_x("Are you sure you want to permanently delete this plan?","confirmation alert for deleting a commission plan","affiliate-for-woocommerce"))&&s.a.deleteCommission()},type:"button",class:"p-1 transition duration-150 ease-in-out border-transparent rounded-full focus:outline-none focus:bg-gray-100 hover:text-red-600 text-red-800"},m("svg",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24",class:"w-5 h-5"},m("path",{d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"}))),m("button",{onclick:function(){s.a.currentCommissionID=0},class:"p-1 text-gray-400 transition duration-150 ease-in-out border-transparent rounded-full hover:text-gray-500 focus:outline-none focus:text-gray-500 focus:bg-gray-100"},m("svg",{class:"w-6 h-6",stroke:"currentColor","stroke-width":"2",fill:"none",viewBox:"0 0 24 24"},m("path",{d:"M6 18L18 6M6 6l12 12"})))))))),m("div",{class:"grid grid-cols-12 gap-8 p-8 text-gray-600"},m("div",{class:"col-span-3 text-sm leading-5"},m("div",{class:"mb-3 font-medium text-gray-700 uppercase"},__("Commission","affiliate-for-woocommerce")),m("div",{class:"relative rounded-md shadow-sm mb-3"},m("input",{id:"commission",class:"block w-full pl-2 pr-36 form-input sm:text-sm sm:leading-5",placeholder:"20.00",value:this.amount,oninput:function(e){t.amount=e.target.value}}),m("div",{class:"absolute inset-y-0 right-0 flex items-center"},m("select",{"aria-label":__("Commission Type","affiliate-for-woocommerce"),class:"h-full py-0 pl-2 pr-8 text-gray-500 bg-transparent border-transparent form-select sm:text-sm sm:leading-5 w-36",id:"commission_type",onchange:function(e){t.type=e.target.value}},m("option",{value:"Percentage",selected:"Percentage"==this.type?"selected":""},_x("Percentage (%)","Commission plan type: percentage","affiliate-for-woocommerce")),m("option",{value:"Flat",selected:"Flat"==this.type?"selected":""},n.a.getAFWParams("storeCurrencyCode")?sprintf(_x("Flat (%s)","Commission plan type: flat with store currency code","affiliate-for-woocommerce"),n.a.getAFWParams("storeCurrencyCode")):_x("Flat","Commission plan type: flat","affiliate-for-woocommerce"))))),this.commissionId!==afwcDashboardParams.default_plan_id?m("[",null,m("div",{class:"text-xs pt-8 mb-2 font-medium text-gray-600 uppercase"},__("Apply to","affiliate-for-woocommerce")),m("div",{class:"space-y-3 text-gray-500"},Object.keys(afwcDashboardParams.plan_dashboard_data.apply_to).map((function(e,a){return m("div",{class:"flex items-center"},m("label",null,m("input",{type:"radio",class:"mr-2 text-indigo-600 transition duration-150 ease-in-out form-radio",name:"apply_to",value:e,onchange:function(e){t.apply_to=e.target.value},checked:t.apply_to===e?"checked":""}),afwcDashboardParams.plan_dashboard_data.apply_to[e]))}))),m("div",{class:"text-xs pt-8 mb-2 font-medium text-gray-600 uppercase"},_x("And then, for remaining products in the order...","Title for commission condition on the remaining products","affiliate-for-woocommerce")),m("div",{class:"space-y-3 text-gray-500"},Object.keys(afwcDashboardParams.plan_dashboard_data.action_for_remaining).map((function(e,a){return m("div",{class:"flex items-center"},m("label",null,m("input",{type:"radio",class:"mr-2 text-indigo-600 transition duration-150 ease-in-out form-radio",name:"action_for_remaining",value:e,onchange:function(e){t.action_for_remaining=e.target.value},checked:t.action_for_remaining===e?"checked":""}),afwcDashboardParams.plan_dashboard_data.action_for_remaining[e]))})))):""),m("div",{class:"col-span-9 text-sm leading-5 text-gray-500"},this.commissionId!==afwcDashboardParams.default_plan_id?m("[",null,m("div",{class:"flex items-baseline gap-2 mb-3 -mt-1"},m("div",{class:"mb-3 font-medium text-gray-700 uppercase"},__("When","affiliate-for-woocommerce")),m("div",{class:"inline-flex items-center gap-2 text-sm text-gray-500"},m("div",{class:"flex items-center"},m("select",{"aria-label":"match-type",class:"h-full py-1 pl-3 pr-8 font-medium text-gray-700 bg-transparent form-select sm:text-sm sm:leading-5",onchange:function(e){t.planCondition=e.target.value}},m("option",{value:"AND",selected:"AND"==this.planCondition?"selected":""},__("all","affiliate-for-woocommerce")),m("option",{value:"OR",selected:"OR"==this.planCondition?"selected":""},__("at least one","affiliate-for-woocommerce"))))," ",m("span",null,__("condition groups pass","affiliate-for-woocommerce")))),this.ruleGroups.map((function(e,a){return m(u,{key:e.key,index:a,isOnlyOne:1===t.ruleGroups.length,callbackToParent:t.updateData.bind(t),ruleGroup:e})}))):"",m(p,null)))))}}])&&h(t.prototype,a),i&&h(t,i),e}(),y=a(8);function v(e,t,a,i,r,s,o){try{var n=e[s](o),l=n.value}catch(e){return void a(e)}n.done?t(l):Promise.resolve(l).then(i,r)}function w(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var b=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.params={id:t.attrs.id||0},this.currentDraggingItem=null,this.currentOrderString=null,this.showSaveBtn=null,this.defaultPlanId=parseInt(n.a.getAFWParams("default_plan_id")||0)}var t,a,i,l,c;return t=e,(a=[{key:"refreshModel",value:function(e){this.params.id=e,this.model=new s.a}},{key:"dragStart",value:function(e,t){parseInt(t.commissionId)!==this.defaultPlanId?(this.currentDraggingItem=t,this.currentOrderString||(this.currentOrderString=JSON.stringify(r.a.data.planOrder)),e.dataTransfer.effectAllowed="move",e.dataTransfer.setData("text/html",null)):e.preventDefault()}},{key:"drop",value:function(e,t){e.preventDefault();var a=parseInt(t.commissionId);if(a!==parseInt(this.currentDraggingItem.commissionId)){var i=r.a.data.planOrder.indexOf(parseInt(this.currentDraggingItem.commissionId)),s=r.a.data.planOrder.indexOf(a);r.a.data.planOrder.splice(s,0,r.a.data.planOrder.splice(i,1)[0])}r.a.reOrder(),this.currentOrderString!=JSON.stringify(r.a.data.planOrder)?this.showSaveBtn=!0:this.showSaveBtn=!1}},{key:"dragOver",value:function(e){e.preventDefault()}},{key:"savePlanOrder",value:(l=regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.a.savePlanOrder();case 2:this.showSaveBtn=!1,o.a.show({status:"success",message:_x("Plan order saved successfully","success message after saving commission plan order","affiliate-for-woocommerce")});case 4:case"end":return e.stop()}}),e,this)})),c=function(){var e=this,t=arguments;return new Promise((function(a,i){var r=l.apply(e,t);function s(e){v(r,a,i,s,o,"next",e)}function o(e){v(r,a,i,s,o,"throw",e)}s(void 0)}))},function(){return c.apply(this,arguments)})},{key:"view",value:function(){var e=this;return m("section",null,m("h3",{class:"text-lg font-bold text-gray-700 sm:text-3xl leading-8"},__("Commission Plans","affiliate-for-woocommerce")),m("div",{class:"text-right px-2"},m("a",{class:(this.showSaveBtn?"":"invisible")+" text-sm font-medium leading-6 text-indigo-600 hover:text-indigo-800",href:"#",onclick:function(t){t.preventDefault(),e.savePlanOrder()}},__("Save Order","affiliate-for-woocommerce"))),m("ul",{class:"text-gray-600 py-2 max-h-screen overflow-auto"},r.a.data.commissions.map((function(t){return m("li",{"data-id":t.commissionId,class:"my-6 overflow-hidden text-xs text-gray-400 transition duration-150 ease-in-out bg-white rounded-lg shadow-sm hover:bg-gray-50 focus:outline-none focus:bg-gray-50",onclick:function(){s.a.currentCommissionID=t.commissionId,e.refreshModel(s.a.currentCommissionID)},draggable:parseInt(t.commissionId)!==e.defaultPlanId,ondragstart:function(a){e.dragStart(a,t)},ondrop:function(a){return e.drop(a,t)},ondragover:function(t){e.dragOver(t)}},m("a",{class:"block py-3 cursor-pointer hover:bg-white focus:outline-none focus:bg-white transition duration-150 ease-in-out"+(s.a.currentCommissionID==t.commissionId?" bg-white outline-none":"")},m("div",{class:"flex pl-4 py-2"},m("div",{class:"mx-2 mt-1 w-4 h-4"},parseInt(t.commissionId)!==e.defaultPlanId&&m("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},m("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"}))),m("div",{class:("Draft"===t.status?"text-gray-400":"text-gray-700")+" sm:truncate flex-1"},m("div",{class:"w-full"},m("span",{class:"text-lg leading-6"},t.name||"")),m("div",{class:"flex items-center w-full mt-1 space-x-4"},m("div",{class:"whitespace-no-wrap"},m("span",{class:"mr-4"},"#",t.commissionId||0),m("span",{class:"Draft"===t.status?"text-gray-400":"text-green-400"},n.a.getCampaignStatus(t.status)||""," ")))),m("div",{class:"mx-2 self-center"},m("svg",{class:"h-5 w-5 text-gray-400",fill:"currentColor",viewBox:"0 0 20 20"},m("path",{"fill-rule":"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z","clip-rule":"evenodd"}))))))}))),0!==s.a.currentCommissionID?m(g,{id:s.a.currentCommissionID}):"",o.a.flags.showNotification?m(y.a,null):null)}}])&&w(t.prototype,a),i&&w(t,i),e}();function x(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}s.a.currentCommissionID=0;var _=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,a,i;return t=e,(a=[{key:"view",value:function(e){return m("main",{class:"max-w-7xl mx-auto my-4 py-2 px-8 grid gap-8 grid-cols-3"},m("section",{class:"col-span-2 overflow-y-auto"},m(b,null)),m("section",{class:"col-span-1 space-y-6 text-gray-500 pt-20 pr-8"},m("p",null,__("While calculating affiliate commission, plans are validated one after the other, starting from the top. Drag and Drop to reorder and prioritize plans. Click on Save Order to save.","affiliate-for-woocommerce")),m("p",null,__("Note: The storewide default commission plan is not sortable. It will be validated at the end - after all the other plans.","affiliate-for-woocommerce"))))}}])&&x(t.prototype,a),i&&x(t,i),e}(),k=a(5);function P(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function C(e,t,a){return t&&P(e.prototype,t),a&&P(e,a),e}var D=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.initialize(t.attrs)}return C(e,[{key:"initialize",value:function(e){this.urlParams=Object.keys(e).length?e:{start_date:new Date((new Date).setDate((new Date).getDate()-30)).toISOString().slice(0,10),end_date:(new Date).toISOString().slice(0,10)},this.model=new r.a(this.urlParams)}}]),C(e,[{key:"onupdate",value:function(e){this.urlParams!=e.attrs&&Object.keys(e.attrs).length&&this.initialize(e.attrs)}},{key:"view",value:function(){return m("div",null,m(i.a,{startDate:this.urlParams.start_date,endDate:this.urlParams.end_date}),r.a.data.commissions.length>0?m("[",null,m(_,null)):k.a.showLoader?"":m("header",{class:"bg-white shadow"},m("div",{class:"max-w-7xl mx-auto py-40 sm:px-3 xl:px-8 text-center text-gray-500"},m("p",{class:"text-xl font-medium leading-8"},__("No commission plans yet.","affiliate-for-woocommerce")),m("div",{class:"text-lg mx-auto leading-8 max-w-md mt-6 space-y-4"},m("p",null,__('Go ahead, click that "Add a Plan" button in the top bar to create your first commission.',"affiliate-for-woocommerce")))),-1===s.a.currentCommissionID?m(g,{id:s.a.currentCommissionID}):""),o.a.flags.showNotification?m(y.a,null):null)}}]),e}()},function(e,t,a){"use strict";a.d(t,"a",(function(){return k}));var i=a(10),r=a(7);function s(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,a,i;return t=e,(a=[{key:"view",value:function(){return m("header",{class:"bg-white shadow"},m("div",{class:"max-w-7xl mx-auto py-8 sm:px-3 xl:px-8"},m("section",{class:"md:flex md:items-center md:justify-between"},m("div",{class:"flex sm:items-center text-gray-400"},m("div",{class:""},m("p",{class:"text-2xl leading-none font-bold text-gray-700"},r.a.data.kpi.total_hits),m("p",{class:"mt-1 leading-6 font-medium text-gray-500"},__("Visitors","affiliate-for-woocommerce"))),m("svg",{class:"fill-current w-3 h-3 mx-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 320 512"},m("path",{d:"M285.476 272.971L91.132 467.314c-9.373 9.373-24.569 9.373-33.941 0l-22.667-22.667c-9.357-9.357-9.375-24.522-.04-33.901L188.505 256 34.484 101.255c-9.335-9.379-9.317-24.544.04-33.901l22.667-22.667c9.373-9.373 24.569-9.373 33.941 0L285.475 239.03c9.373 9.372 9.373 24.568.001 33.941z"})),m("div",{class:""},m("p",{class:"text-2xl leading-none font-bold text-gray-700"},r.a.data.kpi.total_orders),m("p",{class:"mt-1 leading-6 font-medium text-gray-500"},__("Orders","affiliate-for-woocommerce"))),m("svg",{class:"fill-current w-3 h-3 mx-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 320 512"},m("path",{d:"M285.476 272.971L91.132 467.314c-9.373 9.373-24.569 9.373-33.941 0l-22.667-22.667c-9.357-9.357-9.375-24.522-.04-33.901L188.505 256 34.484 101.255c-9.335-9.379-9.317-24.544.04-33.901l22.667-22.667c9.373-9.373 24.569-9.373 33.941 0L285.475 239.03c9.373 9.372 9.373 24.568.001 33.941z"})),m("div",{class:""},m("p",{class:"text-2xl leading-none font-bold text-gray-700"},r.a.data.kpi.conversion,"%"),m("p",{class:"mt-1 leading-6 font-medium text-gray-500"},__("Conversion Rate","affiliate-for-woocommerce")))))))}}])&&s(t.prototype,a),i&&s(t,i),e}(),n=a(4),l=a(3),c=a(8),d=a(0);function u(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var f=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,a,i;return t=e,i=[{key:"affiliateDisplayLink",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";try{var i="",r=afwcDashboardParams.isPrettyReferralEnabled||"no",s=afwcDashboardParams.pname,o="admin"==a?"{affiliate_id}":afwcDashboardParams.affiliate_id;return i=-1==(e=e.replace(/\/$/,"")).indexOf("?")?e+("yes"==r?"/"+s+"/"+o:"?"+s+"="+o):"yes"==r?e.substring(0,e.indexOf("?")).replace(/\/$/,"")+"/"+s+"/"+o+"/?"+e.substring(e.indexOf("?")+1):e+"&"+s+"="+o,i+=""!=t?(-1==i.indexOf("?")?"/?":"&")+"utm_campaign="+t:""}catch(e){console.log("In GlobalFunctions for affiliate links:: ",e)}}}],(a=null)&&u(t.prototype,a),i&&u(t,i),e}();function p(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var h=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.params={id:t.attrs.id||0},this.getStatuses=d.a.getCampaignStatus,this.displayLink=""}var t,a,i;return t=e,i=[{key:"displayLink",get:function(){return e._displayLink},set:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";e._displayLink=t}}],(a=[{key:"oncreate",value:function(e){var t="campaign-editor-"+n.a.details.campaignId;wp.editor.remove(t);var a={tinymce:{wpautop:!1,toolbar1:"bold, italic, strikethrough, bullist, numlist, blockquote, hr, alignleft, aligncenter, alignright, link, unlink, wp_more, spellchecker, fullscreen, wp_adv",toolbar2:"formatselect, underline, alignjustify, forecolor, pastetext, removeformat, charmap, outdent, indent, undo, redo, wp_help",setup:function(e){e.on("init",(function(t){e.setContent(n.a.details.body||"")}))}},quicktags:!0,mediaButtons:!0,textarea_rows:40},i=document.getElementById(t);wp.editor.initialize(t,a),tinymce.execCommand("mceAddEditor",!0,t),i.value=n.a.details.body||""}},{key:"updateCampaign",value:function(){var e=document.getElementById("campaign-title").value||"",t="campaign-editor-"+n.a.details.campaignId,a=document.getElementById(t);if(!e)return l.a.show({status:"warning",message:_x("Please add campaign title","error message when campaign title is missing","affiliate-for-woocommerce")});tinyMCE&&tinyMCE.triggerSave(),n.a.details.status=document.getElementById("campaign-status").value,n.a.details.slug=document.getElementById("campaign-slug").value,n.a.details.targetLink=document.getElementById("campaign-link").value,n.a.details.shortDescription=document.getElementById("campaign-short").value,n.a.details.body=wp.editor.getContent(t)||a.value,n.a.saveCampaign()}},{key:"updateDisplayLInk",value:function(){this.displayLink=f.affiliateDisplayLink(n.a.details.targetLink,n.a.details.slug,"admin")}},{key:"view",value:function(e){var t=this;return this.updateDisplayLInk(),m("aside",{class:"fixed inset-0 overflow-hidden",style:"z-index: 100099"},m("div",{class:"absolute inset-0 overflow-hidden"},m("div",{class:"absolute inset-0 bg-gray-500 transition-opacity opacity-75",onclick:function(){return n.a.currentCampaignID=0}}),m("section",{class:"absolute inset-y-0 right-0 pl-20 max-w-full flex"},m("div",{class:"w-screen max-w-4xl"},m("div",{class:"h-full flex flex-col space-y-6 bg-white shadow-xl overflow-y-scroll"},m("header",{class:"px-4 py-2 sticky top-0 bg-gray-100",style:"z-index:120001"},m("div",{class:"flex items-center justify-between space-x-3"},m("h2",{class:"text-lg leading-7 font-medium text-gray-900"},__("Campaign Detail","affiliate-for-woocommerce")),m("div",{class:"h-7 flex items-center space-x-3"},this.getStatuses()?m("[",null,m("label",{for:"campaign-status",class:"hidden sr-only"},__("Status","affiliate-for-woocommerce")),m("select",{id:"campaign-status",class:"form-select pl-3 pr-10 py-2 text-base leading-6 border-gray-100 focus:outline-none focus:shadow-outline-blue  focus:border-blue-100 sm:text-sm sm:leading-5 text-gray-500","aria-label":_x("Campaign status","Title for campaign status","affiliate-for-woocommerce")},Object.keys(this.getStatuses()).map((function(e){return m("option",{value:e,selected:n.a.details.status==e?"selected":""},t.getStatuses(e)||"")})))):"",m("button",{type:"button",class:"inline-flex justify-center px-4 py-1 text-sm font-medium leading-5 text-white transition duration-150 ease-in-out bg-indigo-600 border border-transparent rounded-lg hover:bg-indigo-500 focus:outline-none focus:shadow-outline-indigo",onclick:function(){return t.updateCampaign()}},__("Save","affiliate-for-woocommerce")),m("button",{onclick:function(){confirm(_x("Are you sure you want to permanently delete this campaign?","confirmation alert for deleting a campaign","affiliate-for-woocommerce"))&&n.a.deleteCampaign()},"aria-label":_x("Delete campaign","Label for delete campaign button","affiliate-for-woocommerce"),type:"button",class:"p-1 transition duration-150 ease-in-out border-transparent rounded-full focus:outline-none focus:bg-gray-100 hover:text-red-600 text-red-800"},m("svg",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24",class:"w-5 h-5"},m("path",{d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"}))),m("button",{"aria-label":_x("Close panel","Label for campaign close panel button on admin side","affiliate-for-woocommerce"),class:"text-gray-400 hover:text-gray-500 transition ease-in-out duration-150",onclick:function(){n.a.currentCampaignID=0}},m("svg",{class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},m("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})))))),m("div",{class:"relative flex-1 px-4 sm:px-6"},m("div",{class:"absolute inset-0 px-4 sm:px-6"},m("div",{class:"h-full space-y-6"},m("div",{class:"space-y-1"},m("div",{class:"flex items-baseline space-x-3"},m("label",{for:"campaign-title",class:"text-sm font-medium leading-5 text-gray-900"},__("Name","affiliate-for-woocommerce")),m("p",{class:"text-xs text-gray-500"},_x("A descriptive title for this campaign - so affiliates can easily understand purpose of the campaign.","description","affiliate-for-woocommerce"))),m("div",{class:"relative rounded-md shadow-sm"},m("input",{id:"campaign-title",class:"form-input block w-full sm:text-sm sm:leading-5 transition ease-in-out duration-150",value:n.a.details.title||"",oninput:function(e){n.a.details.title=e.target.value,n.a.details.slug=e.target.value.toLowerCase().replace(/[^\w ]+/g,"").replace(/ +/g,"-")}}))),m("div",{class:"space-y-1"},m("div",{class:"flex items-baseline space-x-3"},m("label",{for:"campaign-slug",class:"text-sm font-medium leading-5 text-gray-900"},__("Slug","affiliate-for-woocommerce")),m("p",{class:"text-xs text-gray-500"},_x("Short text in links for this campaign","description","affiliate-for-woocommerce"),"- ",m("code",{class:"font-mono"},this.displayLink||""))),m("div",{class:"relative rounded-md shadow-sm w-2/3"},m("input",{id:"campaign-slug",class:"form-input block w-full sm:text-sm sm:leading-5 transition ease-in-out duration-150",value:n.a.details.slug||"",oninput:function(e){return n.a.details.slug=e.target.value||""}}))),m("div",{class:"space-y-1"},m("div",{class:"flex items-baseline space-x-3"},m("label",{for:"campaign-link",class:"text-sm font-medium leading-5 text-gray-900"},__("Destination Link","affiliate-for-woocommerce")),m("p",{class:"text-xs text-gray-500"},_x("Want to take campaign visitors to a specific product / landing page? Or shop / home page? Enter it here.","description","affiliate-for-woocommerce"))),m("div",{class:"relative rounded-md shadow-sm"},m("input",{id:"campaign-link",class:"form-input block w-full sm:text-sm sm:leading-5 transition ease-in-out duration-150",value:n.a.details.targetLink||"",oninput:function(e){return n.a.details.targetLink=e.target.value||""}}))),m("div",{class:"space-y-1"},m("div",{class:"flex items-baseline space-x-3"},m("label",{for:"campaign-short",class:"text-sm font-medium leading-5 text-gray-900"},__("Short Description","affiliate-for-woocommerce")),m("p",{class:"text-xs text-gray-500"},_x("This will show along with campaign name before people see all the details. Summarize the campaign here.","description","affiliate-for-woocommerce"))),m("div",{class:"relative rounded-md shadow-sm"},m("textarea",{id:"campaign-short",rows:"3",class:"form-input block w-full sm:text-sm sm:leading-5 transition ease-in-out duration-150"},n.a.details.shortDescription||""))),m("div",{class:"space-y-1"},m("div",{class:"flex flex-col space-y-2"},m("label",{for:"campaign-editor-"+n.a.details.campaignId,class:"text-sm font-medium leading-5 text-gray-900"},__("Full Description","affiliate-for-woocommerce")),m("p",{class:"text-xs text-gray-500"},_x("Use this editor to insert all the details, rules, creatives, swipes, videos, guidelines or anything else you want to present to affiliate partners. Format it well so that they can easily copy out for their own usage.","description","affiliate-for-woocommerce")),m("p",{class:"text-xs text-gray-500"},_x("If you prefer, create a .zip file with multiple assets. Upload it to your WordPress Media, and link the file from here. You can also link to any external resources as usual.","description","affiliate-for-woocommerce"))),m("div",{class:"relative pt-3"},m("textarea",{id:"campaign-editor-"+n.a.details.campaignId,row:"60",class:"wp-editor-area",style:"height: 300px;",autocomplete:"off",cols:"40"},n.a.details.body||"")))))))),l.a.flags.showNotification?m(c.a,null):null)))}}])&&p(t.prototype,a),i&&p(t,i),e}();function g(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var y=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.params={id:t.attrs.id||0}}var t,a,i;return t=e,(a=[{key:"refreshModel",value:function(e){this.params.id=e,this.model=new n.a}},{key:"view",value:function(){var e=this;return m("section",null,m("h3",{class:"text-lg font-bold text-gray-700 sm:text-3xl leading-8"},__("Campaigns","affiliate-for-woocommerce")),m("ul",{class:"text-gray-600 py-3 max-h-screen overflow-auto"},r.a.data.campaigns.map((function(t){return m("li",{class:"my-6 overflow-hidden text-xs text-gray-400 transition duration-150 ease-in-out bg-white rounded-lg shadow-sm hover:bg-gray-50 focus:outline-none focus:bg-gray-50",onclick:function(){n.a.currentCampaignID=t.campaignId,e.refreshModel(n.a.currentCampaignID)}},m("a",{class:"block py-3 cursor-pointer hover:bg-white focus:outline-none focus:bg-white transition duration-150 ease-in-out"+(n.a.currentCampaignID==t.campaignId?" bg-white outline-none":"")},m("div",{class:"flex items-center pl-4 py-2"},m("div",{class:("Draft"===t.status?"text-gray-400":"text-gray-700")+" sm:truncate flex-1"},m("div",{class:"w-full"},m("span",{class:"text-lg leading-6"},t.title||"")),m("div",{class:"flex items-center w-full mt-1 space-x-4"},m("div",{class:"whitespace-no-wrap"},m("span",{class:"mr-4"},"#",t.campaignId||0),m("span",{class:"Draft"===t.status?"text-gray-400":"text-green-400"},d.a.getCampaignStatus(t.status)||""," ")))),m("div",{class:"mx-2"},m("svg",{class:"h-5 w-5 text-gray-400",fill:"currentColor",viewBox:"0 0 20 20"},m("path",{"fill-rule":"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z","clip-rule":"evenodd"}))))))}))),0!==n.a.currentCampaignID?m(h,{id:n.a.currentCampaignID}):"")}}])&&g(t.prototype,a),i&&g(t,i),e}();function v(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}n.a.currentCampaignID=0;var w=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,a,i;return t=e,(a=[{key:"view",value:function(e){return m("main",{class:"max-w-7xl mx-auto my-4 py-2 px-8 grid gap-8 grid-cols-3"},m("section",{class:"col-span-2 overflow-y-auto"},m(y,null)),m("section",{class:"col-span-1 space-y-6 text-gray-500 pt-12 pr-8"},m("p",null,__('Campaigns help you organize your marketing and promotional materials (all the logos, banners, swipes, videos, guidelines, giveaways, social media assets and what have you...) in different "buckets".',"affiliate-for-woocommerce")),m("p",null,__("Create a campaign for common media assets, or holiday / offer specific materials, or social media shares, or to run an affiliate competition or anything else that makes sense.","affiliate-for-woocommerce")),m("p",null,__("Each campaign can have a destination landing page of its own and will get a unique link. When affiliates share the campaign's affiliated link, visitors will arrive on the destination link and will be attributed to the campaign.","affiliate-for-woocommerce")),m("p",null,__("Add high quality, well designed graphic assets, email swipes and any other material you'd like to provide to affiliate partners  in the campaign. They can copy / download those assets and quickly start promoting.","affiliate-for-woocommerce")),m("p",null,__("If you find it difficult to add assets / format the campaign page, put everything together in a .zip file and link it from the campaign description so partners can download them easily.","affiliate-for-woocommerce")),m("p",null,__("Your affiliate partners can view these campaigns under their My Account > Affiliates > Campaigns tab. The campaigns tab will be visible only when there are active campaigns else it will be hidden","affiliate-for-woocommerce")),m("p",null,__("We track referrals and conversions at both affiliate and campaign level. We will add more reports soon.","affiliate-for-woocommerce"))))}}])&&v(t.prototype,a),i&&v(t,i),e}(),b=a(5);function x(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _(e,t,a){return t&&x(e.prototype,t),a&&x(e,a),e}var k=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.initialize(t.attrs)}return _(e,[{key:"initialize",value:function(e){this.urlParams=Object.keys(e).length?e:{start_date:new Date((new Date).setDate((new Date).getDate()-30)).toISOString().slice(0,10),end_date:(new Date).toISOString().slice(0,10)},this.model=new r.a(this.urlParams)}}]),_(e,[{key:"onupdate",value:function(e){this.urlParams!=e.attrs&&Object.keys(e.attrs).length&&this.initialize(e.attrs)}},{key:"view",value:function(){return m("div",null,m(i.a,{startDate:this.urlParams.start_date,endDate:this.urlParams.end_date}),r.a.data.campaigns.length>0?m("[",null,m(o,null),m(w,null)):b.a.showLoader?"":m("header",{class:"bg-white shadow"},m("div",{class:"max-w-7xl mx-auto py-40 sm:px-3 xl:px-8 text-center text-gray-500"},m("p",{class:"text-xl font-medium leading-8"},__("No campaigns yet.","affiliate-for-woocommerce")),m("div",{class:"text-lg mx-auto leading-8 max-w-md mt-6 space-y-4"},m("p",null,__('Go ahead, click that "Add a Campaign" button in the top bar to create your first campaign.',"affiliate-for-woocommerce")))),-1===n.a.currentCampaignID?m(h,{id:n.a.currentCampaignID}):""),l.a.flags.showNotification?m(c.a,null):null)}}]),e}()},function(e,t,a){"use strict";a.r(t),function(e){a(17);var t=a(12),i=a(14),r=a(13);e.__=wp.i18n.__,e._x=wp.i18n._x,e._nx=wp.i18n._nx,e.sprintf=wp.i18n.sprintf;var s=document.getElementById("afw-admin-dasboard");m.route(s,"/dashboard",{"/dashboard":{view:function(e){return[m(t.a,e.attrs)]}},"/campaigns":{view:function(e){return[m(i.a,e.attrs)]}},"/plans":{view:function(e){return[m(r.a,e.attrs)]}}})}.call(this,a(16))},function(e,t){var a;a=function(){return this}();try{a=a||new Function("return this")()}catch(e){"object"==typeof window&&(a=window)}e.exports=a},function(e,t,a){}]);
!function(e){var a={};function t(n){if(a[n])return a[n].exports;var i=a[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,t),i.l=!0,i.exports}t.m=e,t.c=a,t.d=function(e,a,n){t.o(e,a)||Object.defineProperty(e,a,{enumerable:!0,get:n})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,a){if(1&a&&(e=t(e)),8&a)return e;if(4&a&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(t.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&a&&"string"!=typeof e)for(var i in e)t.d(n,i,function(a){return e[a]}.bind(null,i));return n},t.n=function(e){var a=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(a,"a",a),a},t.o=function(e,a){return Object.prototype.hasOwnProperty.call(e,a)},t.p="",t(t.s=1)}([function(e,a,t){"use strict";function n(e,a){for(var t=0;t<a.length;t++){var n=a[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}t.d(a,"a",(function(){return k}));var i=function(){function e(){!function(e,a){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}(this,e)}var a,t,i;return a=e,i=[{key:"requestHandler",value:function(a){var t=new FormData,n=a.requestData||{};for(var i in n)t.append(i,n[i]);m.request({method:a.method||"POST",url:e.getAFWParams("ajaxurl")||"",params:{action:n.dashboard},body:t,withCredentials:a.withCredentials||!1,responseType:a.responseType||"json"}).then((function(e){a.hasOwnProperty("callback")&&a.callback(e)}))}},{key:"getDate",value:function(e){var a,t=new Date,n="";switch(e){case"today":a=t,n=t;break;case"yesterday":a=new Date(t.getFullYear(),t.getMonth(),t.getDate()-1),n=new Date(t.getFullYear(),t.getMonth(),t.getDate()-1);break;case"this_week":a=new Date(t.getFullYear(),t.getMonth(),t.getDate()-(t.getDay()-1)),n=t;break;case"last_week":a=new Date(t.getFullYear(),t.getMonth(),t.getDate()-(t.getDay()-1)-7),n=new Date(t.getFullYear(),t.getMonth(),t.getDate()-(t.getDay()-1)-1);break;case"last_4_week":a=new Date(t.getFullYear(),t.getMonth(),t.getDate()-29),n=t;break;case"this_month":a=new Date(t.getFullYear(),t.getMonth(),1),n=t;break;case"last_month":a=new Date(t.getFullYear(),t.getMonth()-1,1),n=new Date(t.getFullYear(),t.getMonth(),0);break;case"3_months":a=new Date(t.getFullYear(),t.getMonth()-2,1),n=t;break;case"6_months":a=new Date(t.getFullYear(),t.getMonth()-5,1),n=t;break;case"this_year":a=new Date(t.getFullYear(),0,1),n=t;break;case"last_year":a=new Date(t.getFullYear()-1,0,1),n=new Date(t.getFullYear(),0,0);break;default:a=new Date(t.getFullYear(),t.getMonth(),1),n=t}var i=6e4*(new Date).getTimezoneOffset();return a=new Date(a.getTime()-i),n=new Date(n.getTime()-i),{startDate:a.toISOString().slice(0,10),endDate:n.toISOString().slice(0,10)}}},{key:"getDateTime",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=a.dayStart,n=void 0!==t&&t,i=a.dayEnd,r=void 0!==i&&i,o=n?"00":r?"23":(new Date).getHours(),s=n?"00":r?"59":(new Date).getMinutes(),l=n?"00":r?"59":(new Date).getSeconds();return e+" "+o+":"+s+":"+l}},{key:"getFullDate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,a=new Date,t=0!==e?new Date(a.setDate(a.getDate()+e)):a;return t.getFullYear()+"-"+("0"+(t.getMonth()+1)).slice(-2)+"-"+("0"+t.getDate()).slice(-2)}},{key:"formatNumber",value:function(e){return accounting.formatNumber(e,{precision:afwcDashboardParams.precision,thousand:afwcDashboardParams.thousandSeperator,decimal:afwcDashboardParams.decimal})}},{key:"getAFWParams",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=Object.keys(a).length?a:afwcDashboardParams||{};if(e.includes(".")){var n=this.getAFWParams(e.slice(0,e.indexOf(".")),t);return this.getAFWParams(e.slice(e.indexOf(".")+1),n)}return""!==e?e in t?t[e]:"":t}},{key:"doCopy",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(e.length>0){var a=document.createElement("input");a.setAttribute("value",e),document.body.appendChild(a),a.select(),navigator&&navigator.clipboard&&navigator.clipboard.writeText(a.value),document.body.removeChild(a)}}},{key:"getCampaignStatus",value:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=e.getAFWParams("campaignStatuses")||{};return""===a?t:a in t?t[a]:""}},{key:"getCommissionPlansStatus",value:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=e.getAFWParams("commissionPlanStatuses")||{};return""===a?t:a in t?t[a]:""}}],(t=null)&&n(a.prototype,t),i&&n(a,i),e}();function r(e,a){for(var t=0;t<a.length;t++){var n=a[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var o=function(){function e(){!function(e,a){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}(this,e),e.showLoader=e.showLoader||!1,e.msg=e.msg||_x("Loading","default loader message","affiliate-for-woocommerce")}var a,t,n;return a=e,n=[{key:"showLoader",get:function(){return e._showLoader},set:function(a){return e._showLoader=Boolean(a)}},{key:"msg",get:function(){return e._msg},set:function(a){return e._msg=a}}],(t=[{key:"view",value:function(a){return m("div",{class:"fixed w-full flex flex-col left-0 top-0 h-full justify-center text-center items-center space-y-4 z-50"},e.msg?m("div",{class:"text-lg text-gray-600"},e.msg):"",m("div",{class:"text-indigo-600"},m("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-16 h-16",stroke:"currentColor",fill:"none",viewBox:"0 0 57 57"},m("g",{transform:"translate(1 1)","stroke-width":"2",fill:"none","fill-rule":"evenodd"},m("circle",{cx:"5",cy:"50",r:"5"},m("animate",{attributeName:"cy",begin:"0s",dur:"2.2s",values:"50;5;50;50",calcMode:"linear",repeatCount:"indefinite"}),m("animate",{attributeName:"cx",begin:"0s",dur:"2.2s",values:"5;27;49;5",calcMode:"linear",repeatCount:"indefinite"})),m("circle",{cx:"27",cy:"5",r:"5"},m("animate",{attributeName:"cy",begin:"0s",dur:"2.2s",from:"5",to:"5",values:"5;50;50;5",calcMode:"linear",repeatCount:"indefinite"}),m("animate",{attributeName:"cx",begin:"0s",dur:"2.2s",from:"27",to:"27",values:"27;49;5;27",calcMode:"linear",repeatCount:"indefinite"})),m("circle",{cx:"49",cy:"50",r:"5"},m("animate",{attributeName:"cy",begin:"0s",dur:"2.2s",values:"50;50;5;50",calcMode:"linear",repeatCount:"indefinite"}),m("animate",{attributeName:"cx",from:"49",to:"49",begin:"0s",dur:"2.2s",values:"49;5;27;49",calcMode:"linear",repeatCount:"indefinite"}))))))}}])&&r(a.prototype,t),n&&r(a,n),e}();function s(e,a){for(var t=0;t<a.length;t++){var n=a[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var l=function(){function e(a){!function(e,a){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}(this,e),e.data={kpi:{},campaigns:[]},this.params=a||{},this.fetch()}var a,t,n;return a=e,n=[{key:"data",get:function(){return e._data},set:function(a){e._data=a}}],(t=[{key:"fetch",value:function(){o.showLoader=!0,o.msg=_x("Loading Campaigns","Loading text for campaigns","affiliate-for-woocommerce"),i.requestHandler({requestData:{cmd:"fetch_dashboard_data",security:i.getAFWParams("security.campaign.fetchData")||"",dashboard:"afwc_campaign_controller",campaign_status:afwcDashboardParams.campaign_status||""},callback:function(a){"Success"==a.ACK&&(e.data.kpi=a.result.kpi||{},e.data.campaigns=a.result.campaigns||[]),o.showLoader=!1}})}}])&&s(a.prototype,t),n&&s(a,n),e}();function c(e,a){for(var t=0;t<a.length;t++){var n=a[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}l.data={kpi:{},campaigns:[]};var u=function(){function e(){!function(e,a){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}(this,e),e.initialize()}var a,t,n;return a=e,n=[{key:"initialize",value:function(){e.reset()}},{key:"reset",value:function(){e.flags={showNotification:0},e.notification={status:"warning",message:"",autoHide:!0,hideDelay:8e3}}},{key:"show",value:function(a){var t=a.status,n=void 0===t?"warning":t,i=a.message,r=void 0===i?"":i,o=a.autoHide,s=void 0===o||o,l=a.hideDelay,c=void 0===l?8e3:l;e.notification={status:n,message:r,autoHide:s,hideDelay:c},e.flags.showNotification=1}},{key:"hide",value:function(){e.reset()}}],(t=null)&&c(a.prototype,t),n&&c(a,n),e}();function f(e,a){for(var t=0;t<a.length;t++){var n=a[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}u.initialize();var d=function(){function e(a){!function(e,a){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}(this,e),e.initialize(),this.setCurrentCampaign(e.currentCampaignID)}var a,t,n;return a=e,n=[{key:"initialize",value:function(){e.details={title:"",targetLink:afwcDashboardParams.home_url,slug:"",campaignId:0,shortDescription:"",body:"",status:"Draft",metaData:{}}}},{key:"newCampaign",value:function(){e.currentCampaignID=-1,new e}},{key:"saveCampaign",value:function(){i.requestHandler({requestData:{cmd:"save_campaign",campaign:JSON.stringify(e.details),security:i.getAFWParams("security.campaign.save")||"",dashboard:"afwc_campaign_controller"},callback:function(a){if("Success"==a.ACK){var t="";a.last_inserted_id?(e.details.campaignId=a.last_inserted_id,l.data.campaigns.push(e.details),t=_x("Campaign created successfully","Notification message for successful campaign creation","affiliate-for-woocommerce")):(l.data.campaigns=l.data.campaigns.map((function(a){return a.campaignId==e.details.campaignId?e.details:a})),t=_x("Campaign updated successfully","Notification message for successful campaign update","affiliate-for-woocommerce")),u.show({status:"success",message:t}),e.currentCampaignID=0}else u.show({status:"error",message:_x("Failed to create or update campaign","Notification message for failed campaign creation or update","affiliate-for-woocommerce")})}})}},{key:"deleteCampaign",value:function(){i.requestHandler({requestData:{cmd:"delete_campaign",campaign_id:e.currentCampaignID,security:i.getAFWParams("security.campaign.delete")||"",dashboard:"afwc_campaign_controller"},callback:function(a){if("Success"==a.ACK){var t=e.details.campaignId;l.data.campaigns=l.data.campaigns.filter((function(e){return e.campaignId!=t})),e.currentCampaignID=0,u.show({status:"success",message:_x("Campaign deleted successfully","Notification message for successful campaign deletion","affiliate-for-woocommerce")})}else u.show({status:"error",message:_x("Failed to delete campaign","Notification message for failed campaign deletion","affiliate-for-woocommerce")})}})}},{key:"details",get:function(){return e._details},set:function(a){e._details=a}}],(t=[{key:"setCurrentCampaign",value:function(a){var t={};a>0&&(t=l.data.campaigns.filter((function(e){return e.campaignId==a}))[0]),e.details={title:t.title||"",targetLink:t.targetLink||afwcDashboardParams.home_url,slug:t.slug||"",campaignId:t.campaignId||0,shortDescription:t.shortDescription||"",body:t.body||"",status:t.status||"Draft",metaData:t.metaData||{}}}}])&&f(a.prototype,t),n&&f(a,n),e}();function g(e,a){for(var t=0;t<a.length;t++){var n=a[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}d.initialize();var p=function(){function e(){!function(e,a){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}(this,e)}var a,t,n;return a=e,n=[{key:"affiliateDisplayLink",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";try{var n="",i=afwcDashboardParams.isPrettyReferralEnabled||"no",r=afwcDashboardParams.pname,o="admin"==t?"{affiliate_id}":afwcDashboardParams.affiliate_id;return n=-1==(e=e.replace(/\/$/,"")).indexOf("?")?e+("yes"==i?"/"+r+"/"+o:"?"+r+"="+o):"yes"==i?e.substring(0,e.indexOf("?")).replace(/\/$/,"")+"/"+r+"/"+o+"/?"+e.substring(e.indexOf("?")+1):e+"&"+r+"="+o,n+=""!=a?(-1==n.indexOf("?")?"/?":"&")+"utm_campaign="+a:""}catch(e){console.log("In GlobalFunctions for affiliate links:: ",e)}}}],(t=null)&&g(a.prototype,t),n&&g(a,n),e}();function v(e,a){for(var t=0;t<a.length;t++){var n=a[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var h=function(){function e(){!function(e,a){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}(this,e)}var a,t,n;return a=e,(t=[{key:"view",value:function(e){var a;return a=p.affiliateDisplayLink(d.details.targetLink,d.details.slug,"frontend"),m("aside",{class:"fixed inset-0 overflow-hidden",style:"z-index:120000"},m("div",{class:"absolute inset-0 overflow-hidden"},m("div",{class:"absolute inset-0 bg-gray-500 transition-opacity opacity-75",onclick:function(){d.currentCampaignID=0}}),m("section",{class:"absolute inset-y-0 right-0 pl-20 max-w-full flex"},m("div",{class:"w-screen max-w-4xl"},m("div",{class:"h-full flex flex-col space-y-6 py-4 bg-white shadow-xl overflow-y-scroll"},m("header",{class:"px-4 sm:px-6"},m("div",{class:"flex items-start justify-between space-x-3"},m("h2",{class:"text-3xl leading-8 text-gray-900"},d.details.title||""),m("div",{class:"h-7 flex items-center space-x-3"},m("button",{"aria-label":"Close panel",class:"leading-none text-gray-400 hover:text-gray-500 transition ease-in-out duration-150 p-0",onclick:function(){d.currentCampaignID=0}},m("svg",{class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},m("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})))))),m("div",{class:"relative flex-1 px-4 sm:px-6"},m("div",{class:"absolute inset-0 px-4 sm:px-6"},m("p",{class:"text-lg"},d.details.shortDescription||""),m("p",{class:"mt-4"},_x("Link: ","Campaign tracking link","affiliate-for-woocommerce")," ",m("code",null,a||"")),m("div",{class:"mt-12 mb-4"},m.trust(d.details.body||"")))))))))}}])&&v(a.prototype,t),n&&v(a,n),e}();function y(e,a){for(var t=0;t<a.length;t++){var n=a[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var w=function(){function e(a){!function(e,a){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}(this,e),this.params={id:a.attrs.id||0,startDate:a.attrs.startDate||"",endDate:a.attrs.endDate||""}}var a,t,n;return a=e,(t=[{key:"refreshModel",value:function(e){this.params.id=e,this.model=new d}},{key:"view",value:function(){var e=this;return m("div",null,m("div",null,m("ul",{class:"text-gray-600 m-0 w-full"},l.data.campaigns.map((function(a,t){return m("li",{style:"cursor:pointer",class:"my-2 overflow-hidden text-gray-400 bg-white shadow-sm hover:bg-gray-50 focus:outline-none focus:bg-gray-50",onclick:function(){d.currentCampaignID=a.campaignId,e.refreshModel(d.currentCampaignID)}},m("div",{class:"flex items-center pl-4 py-2"},m("div",{class:"text-gray-700 text-lg pr-4 flex-1 sm:truncate leading-6"},a.title),m("div",{class:"mx-2"},m("svg",{class:"h-5 w-5 text-gray-400",fill:"currentColor",viewBox:"0 0 20 20"},m("path",{"fill-rule":"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z","clip-rule":"evenodd"})))))})))),0!==d.currentCampaignID?m(h,{id:d.currentCampaignID}):"")}}])&&y(a.prototype,t),n&&y(a,n),e}();function b(e,a){for(var t=0;t<a.length;t++){var n=a[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function D(e,a,t){return a&&b(e.prototype,a),t&&b(e,t),e}d.currentCampaignID=0;var k=function(){function e(a){!function(e,a){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}(this,e),this.initialize(a.attrs)}return D(e,[{key:"initialize",value:function(e){this.urlParams=Object.keys(e).length?e:{start_date:new Date((new Date).setDate((new Date).getDate()-30)).toISOString().slice(0,10),end_date:(new Date).toISOString().slice(0,10)},this.model=new l(this.urlParams)}}]),D(e,[{key:"onupdate",value:function(e){this.urlParams!=e.attrs&&Object.keys(e.attrs).length&&this.initialize(e.attrs)}},{key:"view",value:function(){return m("div",null,l.data.campaigns.length>0?m("[",null,m(w,null)):m("p",{class:"text-xl"},afwcDashboardParams.no_campaign_string))}}]),e}()},function(e,a,t){"use strict";t.r(a),function(e){t(3);var a=t(0);e.__=wp.i18n.__,e._x=wp.i18n._x,e.sprintf=wp.i18n.sprintf;var n=document.getElementsByClassName("afw-campaigns")[0]||"";n&&m.route(n,"/campaigns",{"/campaigns":{view:function(e){return[m(a.a,e.attrs)]}}})}.call(this,t(2))},function(e,a){var t;t=function(){return this}();try{t=t||new Function("return this")()}catch(e){"object"==typeof window&&(t=window)}e.exports=t},function(e,a,t){}]);